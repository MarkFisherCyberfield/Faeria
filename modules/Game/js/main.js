(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(t,e,a){},28:function(t,e,a){},29:function(t,e,a){},30:function(t,e,a){},31:function(t,e,a){},32:function(t,e,a){},33:function(t,e,a){},34:function(t,e,a){},35:function(t,e,a){},36:function(t,e,a){},55:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a(1),n=a.n(i),c=a(18),r=a.n(c),l=(a(27),a(3)),o=a(8),d=a(19),u=a(5),h={},p=[],f={},b=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object(i.useState)(h)[1],a=function(t,e){var a=f[t](h,e);h=Object(u.a)(Object(u.a)({},h),a);var s,i=Object(d.a)(p);try{for(i.s();!(s=i.n()).done;){(0,s.value)(h)}}catch(n){i.e(n)}finally{i.f()}};return Object(i.useEffect)((function(){return t&&p.push(e),function(){t&&(p=p.filter((function(t){return t!==e})))}}),[e,t]),[h,a]},y=(a(28),{cardback:"assets/images/cards/cardback.jpg",0:"assets/images/cards/cheeksplore.jpg",1:"assets/images/cards/mercheek.jpg",2:"assets/images/cards/dolphin_cheekrider.jpg",3:"assets/images/cards/clamcheek.jpg",4:"assets/images/cards/ninjacheek.jpg",5:"assets/images/cards/song_of_the_mercheek.jpg",6:"assets/images/cards/cheek_in_a_bottle.jpg",7:"assets/images/cards/cheekie_in_a_lamp.jpg",8:"assets/images/cards/cheeklord.jpg",9:"assets/images/cards/rain_of_cheek.jpg",10:"assets/images/cards/cheekdrop.jpg",11:"assets/images/cards/cheekmoon.jpg",12:"assets/images/cards/cheekpearl.jpg",13:"assets/images/cards/crabcheek.jpg",14:"assets/images/cards/cheekcano.jpg",15:"assets/images/cards/cheekdevil.jpg",16:"assets/images/cards/cheekflame.jpg",17:"assets/images/cards/cheekblast.jpg",18:"assets/images/cards/cheekflame_faerie.jpg",19:"assets/images/cards/baby_cheekdevil.jpg",20:"assets/images/cards/ghostcheek_tower.jpg",21:"assets/images/cards/ghostcheek.jpg",22:"assets/images/cards/ghostcheek_alchemist.jpg",23:"assets/images/cards/cheekruption.jpg",24:"assets/images/cards/suncheek.jpg",25:"assets/images/cards/cheekflower.jpg",26:"assets/images/cards/cavecheek_dweller.jpg",27:"assets/images/cards/mushroom_cheek.jpg",28:"assets/images/cards/cheekshrooms.jpg",29:"assets/images/cards/cheektree_giant.jpg",30:"assets/images/cards/cheekworld_tree.jpg",31:"assets/images/cards/cheek_shaman.jpg",32:"assets/images/cards/cheekfox.jpg",33:"assets/images/cards/cheekbloom_spirit.jpg",34:"assets/images/cards/cheekshield_spirit.jpg",35:"assets/images/cards/cheek_dancers.jpg"}),g={aquatic_enemy:"assets/images/ui/aquatic_enemy.png",aquatic_enemyhover:"assets/images/ui/aquatic_enemyhover.png",aquatic_friendly:"assets/images/ui/aquatic_friendly.png",aquatic_friendlyhover:"assets/images/ui/aquatic_friendlyhover.png",flying_enemy:"assets/images/ui/flying_enemy.png",flying_enemyhover:"assets/images/ui/flying_enemyhover.png",flying_friendly:"assets/images/ui/flying_friendly.png",flying_friendlyhover:"assets/images/ui/flying_friendlyhover.png",jump_enemy:"assets/images/ui/jump_enemy.png",jump_enemyhover:"assets/images/ui/jump_enemyhover.png",jump_friendly:"assets/images/ui/jump_friendly.png",jump_friendlyhover:"assets/images/ui/jump_friendlyhover.png",ranged_enemy:"assets/images/ui/ranged_enemy.png",ranged_enemyhover:"assets/images/ui/ranged_enemyhover.png",ranged_friendly:"assets/images/ui/ranged_friendly.png",ranged_friendlyhover:"assets/images/ui/ranged_friendlyhover.png",scoot_enemy:"assets/images/ui/scoot_enemy.png",scoot_enemyhover:"assets/images/ui/scoot_enemyhover.png",scoot_friendly:"assets/images/ui/scoot_friendly.png",scoot_friendlyhover:"assets/images/ui/scoot_friendlyhover.png",taunt_enemy:"assets/images/ui/taunt_enemy.png",taunt_enemyhover:"assets/images/ui/taunt_enemyhover.png",taunt_friendly:"assets/images/ui/taunt_friendly.png",taunt_friendlyhover:"assets/images/ui/taunt_friendlyhover.png"},m=function(t){var e=b(),a=Object(l.a)(e,2),i=a[0],n=a[1],c=[[t.x+30,t.y-10].join(),[t.x-10,t.y+60].join(),[t.x+70,t.y+60].join()].join(" "),r=i.data.board.tiles[t.tile].occupant.player===t.user?i.tiles[t.tile].occupantSelectable&&i.data.status.current===t.user?"friendly-selectable":"friendly":i.tiles[t.tile].occupantSelectable?"enemy-selectable":"enemy",o=i.data.board.tiles[t.tile].occupant.player===t.user?i.tiles[t.tile].occupantSelected?"creature-selected":"creature":"creature-enemy",d=i.data.board.tiles[t.tile].occupant.player===t.user?"friendly":"enemy",u=i.data.board.tiles[t.tile].occupant.taunt?Object(s.jsx)("rect",{x:t.x+20,y:t.y-7,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_taunt"+t.tile+")"}):null,h=i.data.board.tiles[t.tile].occupant.ranged?Object(s.jsx)("rect",{x:t.x+50,y:t.y+30,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_ranged"+t.tile+")"}):null,p=i.data.board.tiles[t.tile].occupant.movement.special.flying?Object(s.jsx)("rect",{x:t.x+20,y:t.y+45,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_flying"+t.tile+")"}):null,f=!p&&i.data.board.tiles[t.tile].occupant.movement.special.aquatic?Object(s.jsx)("rect",{x:t.x+20,y:t.y+45,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_aquatic"+t.tile+")"}):null,m=i.data.board.tiles[t.tile].occupant.movement.special.jump?Object(s.jsx)("rect",{x:t.x+20,y:t.y+65,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_jump"+t.tile+")"}):null,_=!m&&i.data.board.tiles[t.tile].occupant.movement.range>1?Object(s.jsx)("rect",{x:t.x+20,y:t.y+65,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_scoot"+t.tile+")"}):null,j=i.data.board.tiles[t.tile].occupant.divine?Object(s.jsx)("polygon",{points:c,className:"divine"}):null,v=i.data.board.tiles[t.tile].occupant.protection?Object(s.jsx)("ellipse",{cx:t.x+30,cy:t.y+39,rx:"49",ry:"49",className:"protection"}):null,O=Object(s.jsxs)("g",{className:r,onClick:function(){if(i.tiles[t.tile].occupantSelectable&&i.data.status.current===t.user){var e={event:"occupant",player:t.user,opponent:t.opponent,tile_id:t.tile};"gift_occupant"===i.currentAction?n("PROCESS_GIFT_OCCUPANT",e):"event_occupant"===i.currentAction?n("PROCESS_EVENT_OCCUPANT",e):i.data.board.tiles[t.tile].occupant.player===t.user?n("SELECT_OCCUPANT",e):"occupant_selected"===i.currentAction&&n("ATTACK_OCCUPANT",e)}},children:[Object(s.jsxs)("defs",{children:[Object(s.jsx)("pattern",{id:"creature-image"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:y[i.data.board.tiles[t.tile].occupant.id]})}),Object(s.jsx)("pattern",{id:"icon_aquatic"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["aquatic_"+d]})}),Object(s.jsx)("pattern",{id:"icon_flying"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["flying_"+d]})}),Object(s.jsx)("pattern",{id:"icon_jump"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["jump_"+d]})}),Object(s.jsx)("pattern",{id:"icon_ranged"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["ranged_"+d]})}),Object(s.jsx)("pattern",{id:"icon_scoot"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["scoot_"+d]})}),Object(s.jsx)("pattern",{id:"icon_taunt"+t.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["taunt_"+d]})})]}),Object(s.jsx)("rect",{x:t.x,y:t.y,rx:"5",ry:"5",width:t.width,height:t.width/3*4,className:o,fill:"url(#creature-image"+t.tile+")"}),u,h,p,f,m,_,Object(s.jsx)("rect",{x:t.x,y:t.y+55,rx:"5",ry:"5",width:"20",height:"25",className:"attack"}),Object(s.jsx)("text",{x:t.x+10,y:t.y+70,dy:".3em",className:"attack-text",children:i.data.board.tiles[t.tile].occupant.attack}),Object(s.jsx)("rect",{x:t.x+40,y:t.y+55,rx:"5",ry:"5",width:"20",height:"25",className:"health"}),Object(s.jsx)("text",{x:t.x+50,y:t.y+70,dy:".3em",className:"health-text",children:i.data.board.tiles[t.tile].occupant.health}),j,v]});return i.data.board.tiles[t.tile].occupant.id>0?O:null},_=(a(29),function(t){var e=b(),a=Object(l.a)(e,2),i=a[0],c=a[1],r=i.tiles[t.id].selectable&&i.data.status.current===t.user?"tile-selectable":"tile-not-selectable",o=i.data.board.tiles[t.id].owner!==t.user?t.type+"-opponent":t.type,d=t.hexSize,u=t.startPosX,h=t.startPosY,p=[[u+.5*d,h].join(),[u+1.5*d,h].join(),[u+2*d,h+Math.sqrt(3)*d*.5].join(),[u+1.5*d,h+Math.sqrt(3)*d].join(),[u+.5*d,h+Math.sqrt(3)*d].join(),[u,h+Math.sqrt(3)*d*.5].join()].join(" ");return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)("polygon",{className:o+" "+r,points:p,onClick:function(){if(i.tiles[t.id].selectable&&i.data.status.current===t.user){var e={player:t.user,opponent:t.opponent,tile_id:t.id};"summon_creature"===i.currentAction?c("SUMMON_CREATURE",e):"occupant_selected"===i.currentAction?c("MOVE_OCCUPANT",e):"event_tile"===i.currentAction?c("PROCESS_EVENT_TILE",e):c("BUILD_TILE",e)}}}),Object(s.jsx)(m,{tile:t.id,x:u+.5*d,y:h+Math.sqrt(3)*d*.125,width:d,user:t.user,opponent:t.opponent})]})}),j=(a(30),function(t){var e=t.data.collected?"well-collected":"well-available";return Object(s.jsx)("circle",{cx:t.cx,cy:t.cy,r:t.r,className:e})}),v=(a(31),function(t){var e=b(),a=Object(l.a)(e,2),i=a[0],n=a[1],c=i.gods[t.id].selectable?"god-selectable":"god-not-selectable";return Object(s.jsxs)("g",{className:c,onClick:function(){if(i.gods[t.id].selectable){var e={event:"god",god:t.id,player:t.user,opponent:t.opponent};"event_occupant"===i.currentAction?n("PROCESS_EVENT_OCCUPANT",e):n("ATTACK_GOD",e)}},children:[Object(s.jsx)("circle",{cx:t.cx,cy:t.cy,r:t.r}),Object(s.jsx)("text",{x:t.cx,y:t.cy,textAnchor:"middle",stroke:"#8B0000",strokeWidth:"4px",fontSize:"40px",dy:".3em",children:t.data.health})]})}),O=function(t){var e=60,a="player2"===t.user?{G:2,F:5,E:6,D:5,C:6,B:5,A:2}:{A:2,B:5,C:6,D:5,E:6,F:5,G:2},i="player2"===t.user?{G:[3,0],A:[3,0]}:{A:[0,3],G:[0,3]},n="player2"===t.user?{D:[6,0]}:{D:[0,6]},c=Object.keys(a).map((function(i,n){return Object(o.a)(Array(a[i])).map((function(c,r){var l=n%2===0,o="player2"===t.user?a[i]-r:r+1;return Object(s.jsx)(_,{id:i+o,type:t.data.tiles[i+o].type,hexSize:e,startPosX:e*n*1.5,startPosY:l?Math.sqrt(3)*e*(.5*(6-a[i])+r)+Math.sqrt(3)*e*.5:Math.sqrt(3)*e*r+Math.sqrt(3)*e,user:t.user,opponent:t.opponent},i+o)}))})),r=Object.keys(i).map((function(n){return i[n].map((function(c,r){var l=Object.keys(a).indexOf(n)%2===0;return Object(s.jsx)(j,{id:"well-"+n+i[n][r],data:t.data.wells[n+i[n][r]],r:30,cx:90*Object.keys(a).indexOf(n)+e,cy:l?(6-a[n]-i[n].length+[0,3][r])*Math.sqrt(3)*e:(6-a[n]-i[n].length+[0,3][r])*Math.sqrt(3)*e+Math.sqrt(3)*e*.5},"well-"+n+i[n][r])}))})),l=Object.keys(n).map((function(i){return n[i].map((function(c,r){var l=Object.keys(a).indexOf(i)%2===0;return Object(s.jsx)(v,{id:i+n[i][r],data:t.data.gods[i+n[i][r]],r:39,cx:90*Object.keys(a).indexOf(i)+e,cy:l?(7-a[i]-n[i].length+[0,6][r])*Math.sqrt(3)*e:(7-a[i]-n[i].length+[0,6][r])*Math.sqrt(3)*e+Math.sqrt(3)*e*.5,user:t.user,opponent:t.opponent},"god-"+i+n[i][r])}))}));return Object(s.jsx)("div",{style:{width:"60vw",justifyContent:"center",display:"flex"},children:Object(s.jsxs)("svg",{width:90*Object.keys(a).length+30,height:Math.sqrt(3)*e*7,children:[c,r,l]})})},k=(a(32),function(t){var e=b(),a=Object(l.a)(e,2),i=a[0],n=a[1],c=i.data[t.user].mulligan?t.clickAction:i.data.status.current!==t.user||t.owner!==t.user?function(){}:function(){if(i.hand[t.index].selectable&&i.data[t.user].cards[t.id].faeria_cost<=i.data[t.user].faeria){var e={player:t.user,opponent:t.opponent,hand_id:t.index,card_id:t.id};"event"===i.data[t.user].cards[t.id].type?n("SELECT_EVENT",e):n("SELECT_CARD",e)}},r=t.owner===t.opponent?y.cardback:y[t.data.id];return Object(s.jsx)("div",{className:t.classname,onClick:c,children:Object(s.jsx)("img",{id:t.index,alt:"",src:r,width:t.width,height:parseInt(t.height)-6+"px"})})}),w=function(t){var e=b()[0],a=t.data.hand.map((function(a,i){var n=e.hand[i+1].selected&&t.user===t.owner?"-selected":"";return Object(s.jsx)(k,{id:a,index:i+1,data:t.data.cards[a],height:t.height,width:"120px",classname:"card"+n,user:t.user,opponent:t.opponent,owner:t.owner},a)}));return Object(s.jsx)("div",{style:{width:"60vw",height:t.height,justifyContent:"center",display:"flex",alignSelf:t.align},children:a})},S={"wheel-B3":"assets/images/ui/pluscard.png","wheel-C2":"assets/images/ui/pluscheekia.png"},E=function(t){var e=b(),a=Object(l.a)(e,2),i=a[0],n=a[1],c=i.wheelbuttons[t.id].selectable?"":" not-selectable",r=t.hexSize,o=t.startPosX,d=t.startPosY,u=[[o+.5*r,d].join(),[o+1.5*r,d].join(),[o+2*r,d+Math.sqrt(3)*r*.5].join(),[o+1.5*r,d+Math.sqrt(3)*r].join(),[o+.5*r,d+Math.sqrt(3)*r].join(),[o,d+Math.sqrt(3)*r*.5].join()].join(" ");return Object(s.jsxs)("g",{children:[Object(s.jsx)("defs",{children:Object(s.jsx)("pattern",{id:"buttonimage-"+t.id,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:S[t.id]})})}),Object(s.jsx)("polygon",{className:t.className+c,fill:"url(#buttonimage-"+t.id+")",id:t.id,points:u,onClick:function(){if(i.wheelbuttons[t.id].selectable)switch(t.id){case"wheel-B3":n("DRAW_CARD",t.user);break;case"wheel-C2":n("PLUS_FAERIA",t.user);break;default:n("SELECT_LAND",{player:t.user,wheelbutton_id:t.id})}}})]})},x=(a(33),function(t){var e=b()[1],a=0===t.data.turn?"MULLIGAN":t.opponent===t.data.current?"ENEMY TURN":"END TURN",i=t.opponent===t.data.current?"enemyturn-button":"endturn-button",n=t.opponent===t.data.current?"enemyturn-text":"endturn-text",c=0===t.data.turn||t.opponent===t.data.current?function(){}:function(){var a={player:t.user,opponent:t.opponent,id:t.id};e("END_TURN",a)};return Object(s.jsxs)("g",{onClick:c,children:[Object(s.jsx)("rect",{x:"50",y:"125",rx:"20",ry:"20",width:"200",height:"50",className:i}),Object(s.jsx)("text",{x:"150",y:"150",fontSize:"25",className:n,dy:".3em",children:a})]})}),N=(a(34),function(t){var e=b()[0],a=40,i={A:2,B:3,C:2},n=.5*(300-(60*Object.keys(i).length+20)),c=.5*(300-Math.sqrt(3)*a*3-Math.sqrt(3)*a),r=Object.keys(i).map((function(e,r){return Object(o.a)(Array(i[e])).map((function(l,o){var d=r%2!==0;return Object(s.jsx)(E,{id:"wheel-"+e+(o+1),className:"wheel-"+e+(o+1),hexSize:a,startPosX:a*r*1.5+n,startPosY:d?Math.sqrt(3)*a*(.5*(3-i[e])+o)+Math.sqrt(3)*a*.5+c:Math.sqrt(3)*a*o+Math.sqrt(3)*a+c,user:t.user},"wheel-"+e+(o+1))}))})),l=e.data[t.user].wheel_used?Object(s.jsx)(x,{data:t.data,user:t.user,opponent:t.opponent,id:t.id}):r,d=t.data.current===t.opponent?"#962d3e":"#00FA9A",u=t.data.current===t.opponent?"#262626":"#2F4F4F";return Object(s.jsx)("div",{style:{width:"300px",height:"300px",position:"absolute",bottom:"50px",left:"50px"},children:Object(s.jsxs)("svg",{width:"300px",height:"300",children:[Object(s.jsx)("circle",{cx:"150",cy:"150",r:"145",stroke:d,strokeWidth:"5",fill:u}),l]})})}),A=function(t){return Object(s.jsx)("svg",{children:Object(s.jsxs)("g",{children:[Object(s.jsx)("circle",{cx:"50%",cy:"50%",r:"50",stroke:"#001920",strokeWidth:"5",fill:"#00bae8"}),Object(s.jsx)("text",{x:"50%",y:"50%",stroke:"#001920",strokeWidth:"3px",textAnchor:"middle",fontSize:"50px",dy:".3em",children:t.faeria})]})})},T=function(t){return Object(s.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(s.jsxs)("div",{style:{border:"5px solid #001920"},children:["Deck: ",t.deckcounter]}),Object(s.jsxs)("div",{style:{border:"5px solid #001920"},children:["Hand: ",t.handcounter]})]})},F=function(t){var e=t.hexSize,a=t.startPosX,i=t.startPosY,n=[[a+.5*e,i].join(),[a+1.5*e,i].join(),[a+2*e,i+Math.sqrt(3)*e*.5].join(),[a+1.5*e,i+Math.sqrt(3)*e].join(),[a+.5*e,i+Math.sqrt(3)*e].join(),[a,i+Math.sqrt(3)*e*.5].join()].join(" ");return Object(s.jsx)("polygon",{className:t.className,points:n})};a(35);var C=function(t){var e=function(t,e){var a={f:0,l:0,m:0,d:0};return Object.values(t).forEach((function(t){t.owner===e&&"p"!==t.type.charAt(0)&&(a[t.type.charAt(0)]+=1)})),a}(t.tiles,t.player),a=t.align,i=20,c=Object.keys(e).map((function(t,a){return Object(s.jsxs)("g",{id:t,children:[Object(s.jsx)(F,{className:t,hexSize:i,startPosX:i*a*2.5+8,startPosY:i-i*Math.sqrt(3)*.5}),Object(s.jsx)("text",{x:i*a*2.5+i+8,y:i*Math.sqrt(3)*.5+(i-i*Math.sqrt(3)*.5),className:t+"-text",fontSize:i,dy:".3em",children:e[t]})]},t)})),r=Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)("svg",{height:40,width:"208px",display:"block",margin:"auto",children:c})}),l=Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)(A,{faeria:t.data.faeria})}),o=Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)("div",{style:{width:"50%",border:"5px solid #001920",textAlign:"center"},children:Object(s.jsx)("b",{children:t.data.name})})}),d="flex-end"===a?Object(s.jsxs)(n.a.Fragment,{children:[r,l,o,Object(s.jsx)(T,{deckcounter:t.data.deck.length,handcounter:t.data.hand.length})]}):Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(T,{deckcounter:t.data.deck.length,handcounter:t.data.hand.length}),o,l,r]});return Object(s.jsx)("div",{style:{alignSelf:a,margin:"25px"},children:d})},D=(a(36),a(2)),M=a.n(D),L=function(t){var e=b(),a=Object(l.a)(e,2),n=a[0],c=a[1],r=Object(i.useState)({0:!1,1:!1,2:!1}),o=Object(l.a)(r,2),d=o[0],u=o[1],h=Object(i.useState)(!1),p=Object(l.a)(h,2),f=p[0],y=p[1],g=function(t){var e=JSON.parse(JSON.stringify(d));e[t.target.id]=!e[t.target.id],u(e)},m=function(t){return d[t]?"card-mulligan-selected":"card-mulligan"},_=n.data[t.user].deck.slice(0,3).map((function(e,a){return Object(s.jsx)(k,{id:e,index:a,data:n.data[t.user].cards[e],height:"486px",width:"360px",clickAction:g,classname:m(a),user:t.user,opponent:t.opponent,owner:t.user},e)}));return Object(s.jsxs)("div",{className:"modal",children:[Object(s.jsx)("div",{style:{justifyContent:"center",display:"flex",height:"75%"},children:_}),Object(s.jsx)("div",{style:{justifyContent:"center",display:"flex"},children:Object(s.jsx)("div",{className:"modal-confirm",onClick:function(){if(!f){y(!0);var e=JSON.parse(JSON.stringify(n)),a=new FormData;a.append("id",t.id),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php",a).then((function(a){var s=JSON.parse(a.data);e.data[t.opponent]=s.data[t.opponent];for(var i=e.data[t.user].deck.slice(0,3),n=[],r=[],l=0;l<i.length;l++)d[l]?n.push(e.data[t.user].cards[i[l]].id):r.push(parseInt(i[l]));for(var o=Object.entries(e.data[t.user].cards).filter((function(t){return!n.includes(t[1].id)&&!r.includes(parseInt(t[0]))&&0!==parseInt(t[0])})),u=0;u<n.length;u++){var h=Math.floor(Math.random()*o.length);r.push(parseInt(o[h][0])),o.splice(h,1)}for(var p=[],f=e.data[t.user].deck.filter((function(t){return!r.includes(t)})),b=f.length,y=0;y<b;y++){var g=Math.floor(Math.random()*f.length);p.push(f[g]),f.splice(g,1)}"player2"===t.user&&r.push(0),e.data[t.user].deck=p,e.data[t.user].hand=r,e.data[t.user].mulligan=!1;var m=new FormData;m.append("react_state",JSON.stringify(e)),m.append("id",t.id),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",m).then((function(){c("CONFIRM_MULLIGAN",e)})).catch((function(t){console.log("Network Error",t.message)}))})).catch((function(t){console.log("Network Error",t.message)}))}},children:"CONFIRM"})})]})},q=function(){var t=b(),e=Object(l.a)(t,2),a=e[0],n=e[1],c=document.getElementById("user").value,r=document.getElementById("opponent").value,o=document.getElementById("game_id").value;Object(i.useEffect)((function(){var t={player:c,opponent:r,id:o};if(a.data[c].shuffle||n("SHUFFLE_DECK",t),a.data[c].mulligan||a.data[r].mulligan||0!==a.data.status.turn||"player1"!==c||n("START_GAME",t),a.data.status.current===r&&!a.data[c].mulligan||!a.data[c].mulligan&&a.data[r].mulligan){var e=setTimeout((function(){var t=new FormData;t.append("id",o);var e=Date.now();M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php?timestamp="+e,t).then((function(t){n("SET_DATA",JSON.parse(t.data))})).catch((function(t){console.log("Network Error",t.message)}))}),1e3);return function(){return clearTimeout(e)}}}));var d=a.data[c].mulligan?Object(s.jsx)(L,{user:c,opponent:r,id:o}):null;return a.data.status.finished?Object(s.jsxs)("h1",{style:{textAlign:"center"},children:["WINNER: ",a.data[a.data.status.winner].name]}):Object(s.jsxs)("div",{style:{display:"flex",height:"100vh"},children:[d,Object(s.jsxs)("div",{style:{width:"20vw",position:"relative",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(s.jsx)(C,{align:"flex-start",data:a.data[r],tiles:a.data.board.tiles,player:r}),Object(s.jsx)(C,{align:"flex-end",data:a.data[c],tiles:a.data.board.tiles,player:c})]}),Object(s.jsxs)("div",{style:{width:"60vw",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(s.jsx)(w,{data:a.data[r],owner:r,height:"36px",align:"flex-start",user:c,opponent:r}),Object(s.jsx)(O,{data:a.data.board,user:c,opponent:r}),Object(s.jsx)(w,{data:a.data[c],owner:c,height:"166px",align:"flex-end",user:c,opponent:r})]}),Object(s.jsx)("div",{style:{width:"20vw",position:"relative",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(s.jsx)(N,{data:a.data.status,user:c,opponent:r,id:o})})]})},J=function(){return Object(s.jsx)(q,{})},B=a(20),I=a(21),R=function(){function t(e,a){Object(B.a)(this,t),this.state=e,this.data=a,this.eventLibrary={0:"processEvent_0",5:"processEvent_5",6:"processEvent_6",7:"processEvent_7",9:"processEvent_9",11:"processEvent_11",17:"processEvent_17",23:"processEvent_23",34:"processEvent_34",35:"processEvent_35"},this.summonEffectLibrary={8:"processSummonEffect_8",14:"processSummonEffect_14",25:"processSummonEffect_25",27:"processSummonEffect_27",30:"processSummonEffect_30"},this.giftEffectLibrary={1:"processGiftEffect_1",16:"processGiftEffect_16",22:"processGiftEffect_22",26:"processGiftEffect_26",31:"processGiftEffect_31"},this.lastwordEffectLibrary={3:"processLastwordEffect_3",24:"processLastwordEffect_24"},this.productionEffectLibrary={19:"processProductionEffect_19",20:"processProductionEffect_20"}}return Object(I.a)(t,[{key:"initEventLogic",value:function(){var t=this,e=this.state.hand;return e[this.data.hand_id].selected=!e[this.data.hand_id].selected,e[this.data.hand_id].selected?this[this.eventLibrary[this.state.data[this.data.player].cards[this.data.card_id].id]]("init"):this[this.eventLibrary[this.state.data[this.data.player].cards[this.data.card_id].id]]("revert"),Object.keys(e).forEach((function(a){parseInt(a)!==t.data.hand_id&&(e[a].selectable=!e[a].selectable)})),this.state.hand=e,1!==this.state.data[this.data.player].wheel_neutral_counter?Object.keys(this.state.wheelbuttons).forEach((function(a){e[t.data.hand_id].selected?t.state.wheelbuttons[a].selectable=!1:t.state.wheelbuttons[a].selectable=!0})):(e[this.data.hand_id].selected,this.state.wheelbuttons["wheel-B2"].selectable=!0),this.state}},{key:"handleEventLogic",value:function(){var t=this,e=this.getSelectedCard();this[this.eventLibrary[this.state.data[this.data.player].cards[this.state.data[this.data.player].hand[e-1]].id]]("handle");var a=this.state.hand;return a[e].selected=!a[e].selected,Object.keys(a).forEach((function(t){a[t].selectable=!0})),this.state.hand=a,1!==this.state.data[this.data.player].wheel_neutral_counter?Object.keys(this.state.wheelbuttons).forEach((function(e){t.state.wheelbuttons[e].selectable=!0})):this.state.wheelbuttons["wheel-B2"].selectable=!0,this.state.currentAction="",this.state.data[this.data.player].faeria-=this.state.data[this.data.player].cards[this.state.data[this.data.player].hand[e-1]].faeria_cost,this.state.data[this.data.player].hand.splice(e-1,1),this.state}},{key:"processSummonEffect",value:function(t){return this[this.summonEffectLibrary[t.id]](),this.state}},{key:"initGiftEffect",value:function(t){return this[this.giftEffectLibrary[t.id]]("init",t),this.state}},{key:"processGiftEffect",value:function(t){var e=this,a=this.state.data.board.tiles[t].occupant;return this[this.giftEffectLibrary[a.id]]("handle",t),this.state.tiles[t].occupantSelected=!1,this.state.currentAction="",Object.keys(this.state.hand).forEach((function(t){e.state.hand[t].selectable=!0})),1!==this.state.data[this.data.player].wheel_neutral_counter?Object.keys(this.state.wheelbuttons).forEach((function(t){e.state.wheelbuttons[t].selectable=!0})):this.state.wheelbuttons["wheel-B2"].selectable=!0,this.state}},{key:"processLastwordEffect",value:function(t,e){return this[this.lastwordEffectLibrary[t.id]](t,e),this.state}},{key:"processProductionEffect",value:function(t,e){return this[this.productionEffectLibrary[t.id]](e),this.state}},{key:"setSelectStateForOccupants",value:function(t,e){var a=this,s=[];t&&s.push(this.data.player),e&&s.push(this.data.opponent),Object.keys(this.state.data.board.tiles).forEach((function(t){s.includes(a.state.data.board.tiles[t].occupant.player)&&!a.state.data.board.tiles[t].occupant.divine?a.state.tiles[t].occupantSelectable=!0:a.state.tiles[t].occupantSelectable=!1}))}},{key:"setSelectStateForConditionalOccupants",value:function(t,e,a){var s=this,i=[];t&&i.push(this.data.player),e&&i.push(this.data.opponent),Object.keys(this.state.data.board.tiles).forEach((function(t){i.includes(s.state.data.board.tiles[t].occupant.player)&&!s.state.data.board.tiles[t].occupant.divine&&s.state.data.board.tiles[t].occupant.attack<=a?s.state.tiles[t].occupantSelectable=!0:s.state.tiles[t].occupantSelectable=!1}))}},{key:"getSelectedCard",value:function(){var t=this;return parseInt(Object.keys(this.state.hand).filter((function(e){return t.state.hand[e].selected}))[0])}},{key:"getRemoveOccupant",value:function(){return{player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1}}},{key:"setSelectStateForBuildTiles",value:function(t){var e=this,a=this.state.tiles,s=function(t){return e.state.data.board.tiles[t].owner===e.data.player},i=function(t){return e.state.data.board.tiles[t].occupant.player===e.data.player&&"none"!==e.state.data.board.tiles[t].type},n=Object.keys(this.state.gods).filter((function(t){return e.state.gods[t].player===e.data.player}));Object.keys(a).forEach((function(c){var r=e.state.data.board.tiles[c].type,l=e.state.data.board.tiles[c].owner;("none"===r||"prairie"===r&&l===e.data.player)&&(a[c].adjacent.some(s)||a[c].adjacent.some(i)||e.state.gods[n].adjacent.includes(c))&&(e.state.data.board.tiles[c].occupant.movement.special.aquatic?"lake"===t&&(a[c].selectable=!0):a[c].selectable=!0)})),this.state.tiles=a}},{key:"setSelectStateForAllTiles",value:function(t){var e=this;Object.keys(this.state.tiles).forEach((function(a){e.state.tiles[a].selectable=t}))}},{key:"setSelectStateForGods",value:function(t){var e=this;Object.keys(this.state.gods).forEach((function(a){e.state.gods[a].selectable=t}))}},{key:"getGodTile",value:function(){return{player1:"D6",player2:"D0"}[this.data.player]}},{key:"getLandCostForType",value:function(t,e){return this.state.data[this.data.player].cards[t].land_cost[e]}},{key:"getLandCostForOccupant",value:function(t,e){return this.state.data.board.tiles[t].occupant.land_cost[e]}},{key:"handleCustomDrawLogic",value:function(t){-1!==t&&(this.state.data[this.data.player].hand.length<10?this.state.data[this.data.player].hand.push(this.state.data[this.data.player].deck.splice(t,1)[0]):this.state.data[this.data.player].deck.splice(t,1))}},{key:"getRandomTiles",value:function(){for(var t=Object.keys(this.state.data.board.tiles),e=t.length-1;e>0;e--){var a=Math.floor(Math.random()*(e+1)),s=[t[a],t[e]];t[e]=s[0],t[a]=s[1]}return t}},{key:"getOccupantByID",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 10:return{player:this.data.player,id:10,type:"creature",faeria_cost:1,land_cost:{forest:0,desert:0,mountain:0,lake:1,wild:0},attack:1,base_attack:1,health:1,base_health:1,movement:{range:1,haste:!1,dash:0,special:{aquatic:!0,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!0,hasDashed:!1,hasAttacked:!0,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};case 12:return{player:e.player,id:12,type:"creature",faeria_cost:2,land_cost:{forest:0,desert:0,mountain:0,lake:2,wild:0},attack:1,base_attack:1,health:1,base_health:1,movement:{range:1,haste:!1,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!0,divine:!0,protection:!0,ranged:!1,hasMoved:!0,hasDashed:!1,hasAttacked:!0,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};case 13:return{player:this.data.player,id:13,type:"creature",faeria_cost:4,land_cost:{forest:0,desert:0,mountain:0,lake:2,wild:0},attack:6,base_attack:6,health:4,base_health:4,movement:{range:1,haste:!1,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:e.hasMoved,hasDashed:!1,hasAttacked:e.hasAttacked,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};case 21:return{player:e.player,id:21,type:"creature",faeria_cost:2,land_cost:{forest:0,desert:0,mountain:2,lake:0,wild:0},attack:2,base_attack:2,health:1,base_health:1,movement:{range:1,haste:!1,dash:0,special:{aquatic:!1,flying:!0,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!0,hasDashed:!1,hasAttacked:!0,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};case 28:return{player:this.data.player,id:28,type:"creature",faeria_cost:2,land_cost:{forest:1,desert:0,mountain:0,lake:0,wild:0},attack:1,base_attack:1,health:2,base_health:2,movement:{range:1,haste:!1,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!0,hasDashed:!1,hasAttacked:!0,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};default:return{}}}},{key:"processEvent_0",value:function(t){"revert"===t&&(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForAllTiles(!1),this.state.currentAction=""),"init"===t&&(this.setSelectStateForOccupants(!1,!1),this.setSelectStateForBuildTiles("prairie"),this.state.currentAction="event_tile"),"handle"===t&&(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForAllTiles(!1),this.state.data[this.data.player].faeria+=2,this.state.data.board.tiles[this.data.tile_id].type="prairie",this.state.data.board.tiles[this.data.tile_id].owner=this.data.player)}},{key:"processEvent_5",value:function(t){if("revert"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.currentAction=""),"init"===t&&(this.setSelectStateForOccupants(!0,!0),this.state.currentAction="event_occupant"),"handle"===t){this.setSelectStateForOccupants(!0,!1);var e=this.state.data.board.tiles[this.data.tile_id].occupant;e.health=Math.floor(e.health/2),e.attack=Math.floor(e.attack/2)>=0?Math.floor(e.attack/2):0,this.state.data.board.tiles[this.data.tile_id].occupant=e.health>0?e:this.getRemoveOccupant(),e.health<=0&&e.effects.lastword&&this.processLastwordEffect(e,this.data.tile_id)}}},{key:"processEvent_6",value:function(t){var e=this;if("handle"===t)for(var a=0;a<3;a++)this.handleCustomDrawLogic(this.state.data[this.data.player].deck.findIndex((function(t){return e.getLandCostForType(t,"lake")>0})))}},{key:"processEvent_7",value:function(t){var e=this;if("handle"===t)for(var a=0;a<2;a++)this.handleCustomDrawLogic(this.state.data[this.data.player].deck.findIndex((function(t){return"event"===e.state.data[e.data.player].cards[t].type})))}},{key:"processEvent_9",value:function(t){var e=this;if("handle"===t)for(var a=!0,s=this.getRandomTiles().filter((function(t){return!e.state.data.board.tiles[t].occupant.player})),i=0;a;)0!==s.length?(this.state.data.board.tiles[s.splice(0,1)].occupant=this.getOccupantByID(10),6===++i&&(a=!1)):a=!1}},{key:"processEvent_11",value:function(t){var e=this;"handle"===t&&Object.keys(this.state.data.board.tiles).filter((function(t){return e.state.data.board.tiles[t].occupant.player===e.data.player&&e.getLandCostForOccupant(t,"lake")>0})).forEach((function(t){e.state.data.board.tiles[t].occupant=e.getOccupantByID(13,{hasAttacked:e.state.data.board.tiles[t].occupant.hasAttacked,hasMoved:e.state.data.board.tiles[t].occupant.hasMoved})}))}},{key:"processEvent_17",value:function(t){if("revert"===t&&(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForGods(!1),this.state.currentAction=""),"init"===t&&(this.setSelectStateForOccupants(!0,!0),this.setSelectStateForGods(!0),this.state.currentAction="event_occupant"),"handle"===t){if(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForGods(!1),"occupant"===this.data.event){var e=this.state.data.board.tiles[this.data.tile_id].occupant;e.protection?e.protection=!1:e.health-=3,this.state.data.board.tiles[this.data.tile_id].occupant=e.health>0?e:this.getRemoveOccupant(),e.health<=0&&e.effects.lastword&&this.processLastwordEffect(e,this.data.tile_id)}"god"===this.data.event&&(this.state.data.board.gods[this.data.god].health-=3,this.state.data.board.gods[this.data.god].health<=0&&(this.state.data.status.finished=!0,this.state.data.status.winner=this.state.gods[this.data.god].player===this.data.opponent?this.data.player:this.data.opponent))}}},{key:"processEvent_23",value:function(t){var e=this;"handle"===t&&Object.keys(this.state.data.board.tiles).filter((function(t){return e.state.data.board.tiles[t].occupant.player===e.data.opponent})).forEach((function(t){var a=e.state.data.board.tiles[t].occupant;a.protection?a.protection=!1:a.health-=2,e.state.data.board.tiles[t].occupant=a.health>0?a:e.getRemoveOccupant(),a.health<=0&&a.effects.lastword&&e.processLastwordEffect(a,t)}))}},{key:"processEvent_34",value:function(t){"revert"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.currentAction=""),"init"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.currentAction="event_occupant"),"handle"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.data.board.tiles[this.data.tile_id].occupant.health+=4,this.state.data.board.tiles[this.data.tile_id].occupant.attack+=2)}},{key:"processEvent_35",value:function(t){"revert"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.currentAction=""),"init"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.currentAction="event_occupant"),"handle"===t&&(this.setSelectStateForOccupants(!0,!1),this.state.data.board.tiles[this.data.tile_id].occupant.health+=4,this.state.data.board.tiles[this.data.tile_id].occupant.taunt=!0)}},{key:"processSummonEffect_8",value:function(){var t=this;this.state.tiles[this.data.tile_id].adjacent.some((function(e){return t.state.data.board.tiles[e].occupant.player===t.data.player&&t.state.data.board.tiles[e].occupant.land_cost.lake>0}))&&(this.state.data.board.tiles[this.data.tile_id].occupant.attack++,this.state.data.board.tiles[this.data.tile_id].occupant.health++)}},{key:"processSummonEffect_14",value:function(){var t=this;Object.keys(this.state.data.board.tiles).filter((function(e){return t.state.data.board.tiles[e].occupant.player===t.data.opponent})).forEach((function(e){var a=t.state.data.board.tiles[e].occupant;a.protection?a.protection=!1:a.health-=1,t.state.data.board.tiles[e].occupant=a.health>0?a:t.getRemoveOccupant(),a.health<=0&&a.effects.lastword&&t.processLastwordEffect(a,e)}))}},{key:"processSummonEffect_25",value:function(){this.state.data[this.data.player].faeria+=2}},{key:"processSummonEffect_27",value:function(){var t=this,e=this.getRandomTiles().filter((function(e){return!t.state.data.board.tiles[e].occupant.player&&t.state.tiles[t.data.tile_id].adjacent.includes(e)&&"none"!==t.state.data.board.tiles[e].type}));0!==e.length&&(this.state.data.board.tiles[e.splice(0,1)].occupant=this.getOccupantByID(28))}},{key:"processSummonEffect_30",value:function(){var t=this;Object.keys(this.state.data.board.tiles).filter((function(e){return t.state.data.board.tiles[e].occupant.player===t.data.player&&t.state.data.board.tiles[e].occupant.land_cost.forest>0&&e!==t.data.tile_id})).forEach((function(e){t.state.data.board.tiles[e].occupant.health+=9}))}},{key:"processLastwordEffect_3",value:function(t,e){this.state.data.board.tiles[e].occupant=this.getOccupantByID(12,{player:t.player})}},{key:"processLastwordEffect_24",value:function(t,e){var a=this;this.state.tiles[e].adjacent.forEach((function(e){if(a.state.data.board.tiles[e].occupant.player!==t.player&&a.state.data.board.tiles[e].occupant.player){var s=a.state.data.board.tiles[e].occupant;s.protection?s.protection=!1:s.health-=5,a.state.data.board.tiles[e].occupant=s.health>0?s:a.getRemoveOccupant(),s.health<=0&&s.effects.lastword&&a.processLastwordEffect(s,e)}}))}},{key:"processGiftEffect_1",value:function(t,e){"init"===t&&(this.setSelectStateForConditionalOccupants(!1,!0,2),this.setSelectStateForAllTiles(!1),this.state.tiles[this.data.tile_id].occupantSelected=!0,this.state.tiles[this.data.tile_id].occupantSelectable=!0,this.state.currentAction="gift_occupant"),"handle"===t&&(this.data.tile_id!==e&&(this.state.data.board.tiles[this.data.tile_id].occupant.player=this.data.player,this.state.data.board.tiles[this.data.tile_id].occupant.hasMoved=!0,this.state.data.board.tiles[this.data.tile_id].occupant.hasAttacked=!0),this.setSelectStateForOccupants(!0,!1))}},{key:"processGiftEffect_16",value:function(t,e){if("init"===t&&(this.setSelectStateForOccupants(!1,!0),this.setSelectStateForAllTiles(!1),this.state.tiles[this.data.tile_id].occupantSelected=!0,this.state.tiles[this.data.tile_id].occupantSelectable=!0,this.state.currentAction="gift_occupant"),"handle"===t){if(this.data.tile_id!==e){var a=this.state.data.board.tiles[this.data.tile_id].occupant;a.protection?a.protection=!1:a.health-=1,this.state.data.board.tiles[this.data.tile_id].occupant=a.health>0?a:this.getRemoveOccupant(),a.health<=0&&a.effects.lastword&&this.processLastwordEffect(a,this.data.tile_id)}this.setSelectStateForOccupants(!0,!1)}}},{key:"processGiftEffect_22",value:function(t,e){"init"===t&&(this.setSelectStateForOccupants(!1,!0),this.setSelectStateForAllTiles(!1),this.state.tiles[this.data.tile_id].occupantSelected=!0,this.state.tiles[this.data.tile_id].occupantSelectable=!0,this.state.currentAction="gift_occupant"),"handle"===t&&(this.data.tile_id!==e&&(this.state.data.board.tiles[this.data.tile_id].occupant=this.getOccupantByID(21,{player:this.data.opponent})),this.setSelectStateForOccupants(!0,!1))}},{key:"processGiftEffect_26",value:function(t,e){if("init"===t&&(this.setSelectStateForOccupants(!1,!0),this.setSelectStateForAllTiles(!1),this.state.tiles[this.data.tile_id].occupantSelected=!0,this.state.tiles[this.data.tile_id].occupantSelectable=!0,this.state.currentAction="gift_occupant"),"handle"===t){if(this.data.tile_id!==e){var a=this.state.data.board.tiles[this.data.tile_id].occupant;a.protection?a.protection=!1:a.health-=2,this.state.data.board.tiles[this.data.tile_id].occupant=a.health>0?a:this.getRemoveOccupant(),a.health<=0&&a.effects.lastword&&this.processLastwordEffect(a,this.data.tile_id)}this.setSelectStateForOccupants(!0,!1)}}},{key:"processGiftEffect_31",value:function(t,e){"init"===t&&(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForAllTiles(!1),this.state.tiles[this.data.tile_id].occupantSelected=!0,this.state.tiles[this.data.tile_id].occupantSelectable=!0,this.state.currentAction="gift_occupant"),"handle"===t&&(this.state.data.board.tiles[this.data.tile_id].occupant.health+=4,this.state.data.board.tiles[this.data.tile_id].occupant.attack+=2,this.setSelectStateForOccupants(!0,!1))}},{key:"processProductionEffect_19",value:function(t){this.state.data.board.tiles[t].occupant.attack+=1,this.state.data.board.tiles[t].occupant.health+=1}},{key:"processProductionEffect_20",value:function(t){var e=this,a=this.getRandomTiles().filter((function(t){return!e.state.data.board.tiles[t].occupant.player}));0!==a.length&&(this.state.data.board.tiles[a.splice(0,1)].occupant=this.getOccupantByID(21,{player:this.state.data.board.tiles[t].occupant.player}))}}]),t}(),U=function(t){var e,a;e={SET_DATA:function(t,e){JSON.parse(JSON.stringify(t));return e},SHUFFLE_DECK:function(t,e){for(var a=JSON.parse(JSON.stringify(t)),s=[],i=0;i<t.data[e.player].deck.length;i++){var n=Math.floor(Math.random()*a.data[e.player].deck.length);s.push(a.data[e.player].deck[n]),a.data[e.player].deck.splice(n,1)}a.data[e.player].deck=s,a.data[e.player].shuffle=!0;var c=JSON.parse(JSON.stringify(a)),r=new FormData;return r.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php",r).then((function(t){var a=JSON.parse(t.data);c.data[e.opponent]=a.data[e.opponent];var s=new FormData;s.append("react_state",JSON.stringify(c)),s.append("id",e.id),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(t){console.log("Network Error",t.message)}))})).catch((function(t){console.log("Network Error",t.message)})),a},CONFIRM_MULLIGAN:function(t,e){JSON.parse(JSON.stringify(t));return e},START_GAME:function(t,e){var a=JSON.parse(JSON.stringify(t));a.data.status.turn=1,a.data[e.player].wheel_used=!1,Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0,a.wheelbuttons[t].selected=!1})),Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0,a.hand[t].selected=!1})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].selected=!1,a.tiles[t].occupantSelectable=!0,a.tiles[t].occupantSelected=!1})),Object.keys(a.gods).forEach((function(t){a.gods[t].selectable=!1}));var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(t){console.log("Network Error",t.message)})),a},SELECT_LAND:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=a.wheelbuttons;s[e.wheelbutton_id].selected=!s[e.wheelbutton_id].selected,1!==a.data[e.player].wheel_neutral_counter&&Object.keys(s).forEach((function(t){t!==e.wheelbutton_id&&(s[t].selectable=!s[t].selectable)})),s[e.wheelbutton_id].selected?(Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!1})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].occupantSelectable=!1}))):(Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].occupantSelectable=!0}))),a.wheelbuttons=s;var i=a.tiles,n=function(t){return a.data.board.tiles[t].owner===e.player},c=function(t){return a.data.board.tiles[t].occupant.player===e.player&&"none"!==a.data.board.tiles[t].type},r=Object.keys(a.gods).filter((function(t){return a.gods[t].player===e.player}));return a.wheelbuttons[e.wheelbutton_id].selected?Object.keys(i).forEach((function(t){var s=a.data.board.tiles[t].type,l=a.data.board.tiles[t].owner;("none"===s||"prairie"===s&&l===e.player)&&(i[t].adjacent.some(n)||i[t].adjacent.some(c)||a.gods[r].adjacent.includes(t))&&(a.data.board.tiles[t].occupant.movement.special.aquatic?"lake"===a.wheelbuttons[e.wheelbutton_id].action&&(i[t].selectable=!0):i[t].selectable=!0)})):Object.keys(i).forEach((function(t){i[t].selectable=!1})),a.tiles=i,a},DRAW_CARD:function(t,e){var a=JSON.parse(JSON.stringify(t));a.data[e].deck.length>0?a.data[e].hand.length<9?a.data[e].hand.push(a.data[e].deck.splice(0,1)[0]):a.data[e].deck.splice(0,1):a.data.board.gods[{player1:"D6",player2:"D0"}[e]].health-=++a.data[e].health_dmg,a.data[e].wheel_used=!0;var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(t){console.log("Network Error",t.message)})),a},PLUS_FAERIA:function(t,e){var a=JSON.parse(JSON.stringify(t));a.data[e].faeria++,a.data[e].wheel_used=!0;var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(t){console.log("Network Error",t.message)})),a},BUILD_TILE:function(t,e){var a=JSON.parse(JSON.stringify(t)),s="none";Object.values(a.wheelbuttons).forEach((function(t){t.selected&&(s=t.action)})),a.data.board.tiles[e.tile_id].type=s,"forest"===s&&Object.keys(a.data.board.tiles).forEach((function(t){33===a.data.board.tiles[t].occupant.id&&(a.data.board.tiles[t].occupant.health+=1,a.data.board.tiles[t].occupant.attack+=1)})),a.data.board.tiles[e.tile_id].owner=e.player;var i=Object.keys(a.wheelbuttons).filter((function(t){return a.wheelbuttons[t].selected}));a.wheelbuttons[i].selected=!1,Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].occupantSelectable=!0})),Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0})),"prairie"===s&&(a.data[e.player].wheel_neutral_counter+=1),1!==a.data[e.player].wheel_neutral_counter&&(Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0})),a.data[e.player].wheel_used=!0,a.data[e.player].wheel_neutral_counter=0);var n=new FormData;return n.append("react_state",JSON.stringify(a)),n.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",n).catch((function(t){console.log("Network Error",t.message)})),a},SELECT_CARD:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=a.hand;s[e.hand_id].selected=!s[e.hand_id].selected,Object.keys(s).forEach((function(t){parseInt(t)!==e.hand_id&&(s[t].selectable=!s[t].selectable)})),a.hand=s,1!==a.data[e.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(t){s[e.hand_id].selected?a.wheelbuttons[t].selectable=!1:a.wheelbuttons[t].selectable=!0})):(s[e.hand_id].selected,a.wheelbuttons["wheel-B2"].selectable=!0),Object.keys(a.tiles).forEach((function(t){s[e.hand_id].selected?a.tiles[t].occupantSelectable=!1:a.tiles[t].occupantSelectable=!0}));var i=function(){var t={forest:0,lake:0,mountain:0,desert:0};return Object.values(a.data.board.tiles).forEach((function(a){a.owner===e.player&&"prairie"!==a.type&&(t[a.type]+=1)})),t}(),n=Object.keys(a.data[e.player].cards[e.card_id].land_cost).filter((function(t){return a.data[e.player].cards[e.card_id].land_cost[t]>0&&"wild"!==t}));return s[e.hand_id].selected?(a.currentAction="summon_creature",Object.keys(a.tiles).forEach((function(t){(function(t){var s={8:"lake"};if(Object.keys(s).includes(String(a.data[e.player].cards[e.card_id].id))){if(!a.tiles[t].adjacent.some((function(t){return a.data.board.tiles[t].occupant.player===e.player&&a.data.board.tiles[t].occupant.land_cost[s[a.data[e.player].cards[e.card_id].id]]>0}))&&(!n.includes(a.data.board.tiles[t].type)||a.data.board.tiles[t].owner!==e.player))return!1;if(!a.data[e.player].cards[e.card_id].movement.special.aquatic&&!a.data[e.player].cards[e.card_id].movement.special.flying&&"none"===a.data.board.tiles[t].type)return!1;if(a.data[e.player].cards[e.card_id].movement.special.aquatic&&!a.data[e.player].cards[e.card_id].movement.special.flying&&"none"!==a.data.board.tiles[t].type&&"lake"!==a.data.board.tiles[t].type)return!1}else{if(a.data.board.tiles[t].owner!==e.player)return!1;if(!n.includes(a.data.board.tiles[t].type))return!1}if(a.data.board.tiles[t].occupant.player)return!1;var c=!0;return Object.keys(a.data[e.player].cards[e.card_id].land_cost).forEach((function(t){"wild"!==t?a.data[e.player].cards[e.card_id].land_cost[t]>i[t]&&(c=!1):a.data[e.player].cards[e.card_id].land_cost[t]>Object.values(i).reduce((function(t,e){return t+e}))&&(c=!1)})),c})(t)&&(a.tiles[t].selectable=!0)}))):(a.currentAction="",Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1}))),a},SELECT_EVENT:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=function(){var t={forest:0,lake:0,mountain:0,desert:0};return Object.values(a.data.board.tiles).forEach((function(a){a.owner===e.player&&"prairie"!==a.type&&(t[a.type]+=1)})),t}(),i=!0;if(Object.keys(a.data[e.player].cards[e.card_id].land_cost).forEach((function(t){"wild"!==t?a.data[e.player].cards[e.card_id].land_cost[t]>s[t]&&(i=!1):a.data[e.player].cards[e.card_id].land_cost[t]>Object.values(s).reduce((function(t,e){return t+e}))&&(i=!1)})),i){var n=new R(a,e);if(a.data[e.player].cards[e.card_id].effects.target)a=n.initEventLogic();else{a.hand[e.hand_id].selected=!a.hand[e.hand_id].selected,a=n.handleEventLogic();var c=new FormData;c.append("react_state",JSON.stringify(a)),c.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",c).catch((function(t){console.log("Network Error",t.message)}))}}return a},PROCESS_EVENT_OCCUPANT:function(t,e){var a=JSON.parse(JSON.stringify(t));a=new R(a,e).handleEventLogic();var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(t){console.log("Network Error",t.message)})),a},PROCESS_EVENT_TILE:function(t,e){var a=JSON.parse(JSON.stringify(t));a=new R(a,e).handleEventLogic();var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(t){console.log("Network Error",t.message)})),a},PROCESS_GIFT_OCCUPANT:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=Object.keys(a.tiles).filter((function(t){return a.tiles[t].occupantSelected}))[0],i=new R(a,e);a=i.processGiftEffect(s);var n=new FormData;return n.append("react_state",JSON.stringify(a)),n.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",n).catch((function(t){console.log("Network Error",t.message)})),a},SUMMON_CREATURE:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=a.data.board.tiles[e.tile_id].occupant;s.player=e.player;var i=parseInt(Object.keys(a.hand).filter((function(t){return a.hand[t].selected}))[0]),n=a.data[e.player].cards[a.data[e.player].hand[i-1]];s.id=n.id,s.type=n.type,s.faeria_cost=n.faeria_cost,s.land_cost=n.land_cost,s.attack=n.attack,s.base_attack=n.base_attack,s.health=n.health,s.base_health=n.base_health,s.movement=n.movement,s.taunt=n.taunt,s.divine=n.divine,s.protection=n.protection,s.ranged=n.ranged,s.hasDashed=!1,s.effects=n.effects,n.movement.haste?(s.hasMoved=!1,s.hasAttacked=!1,0===n.movement.dash&&Object.keys(a.data.board.wells).forEach((function(t){a.data.board.wells[t].adjacent.includes(e.tile_id)&&a.data.board.wells[t].available&&(a.data.board.wells[t].available=!1,a.data.board.wells[t].collected=!0,a.data[e.player].faeria+=1)}))):(s.hasMoved=!0,s.hasAttacked=!0),a.data.board.tiles[e.tile_id].occupant=s;var c=a.hand;(c[i].selected=!c[i].selected,s.effects.summon)&&new R(a,e).processSummonEffect(a.data.board.tiles[e.tile_id].occupant);if(s.effects.gift){var r=new R(a,e);c[i].selectable=!1,r.initGiftEffect(a.data.board.tiles[e.tile_id].occupant)}else Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].occupantSelectable=!0})),Object.keys(c).forEach((function(t){c[t].selectable=!0})),1!==a.data[e.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,a.currentAction="";a.hand=c,a.data[e.player].faeria-=a.data[e.player].cards[a.data[e.player].hand[i-1]].faeria_cost,a.data[e.player].hand.splice(i-1,1);var l=new FormData;return l.append("react_state",JSON.stringify(a)),l.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",l).catch((function(t){console.log("Network Error",t.message)})),a},SELECT_OCCUPANT:function(t,e){var a=JSON.parse(JSON.stringify(t));a.tiles[e.tile_id].occupantSelected=!a.tiles[e.tile_id].occupantSelected;var s=a.tiles[e.tile_id].adjacent.some((function(t){return a.data.board.tiles[t].occupant.taunt&&a.data.board.tiles[t].occupant.player===e.opponent})),i=[];a.data.board.tiles[e.tile_id].occupant.movement.special.jump&&a.tiles[e.tile_id].adjacent.forEach((function(t){i.includes(t)||t===e.tile_id||i.push(t),a.tiles[t].adjacent.forEach((function(t){i.includes(t)||t===e.tile_id||i.push(t)}))}));for(var n=a.data.board.tiles[e.tile_id].occupant.movement.dash>0&&!a.data.board.tiles[e.tile_id].occupant.hasDashed?a.data.board.tiles[e.tile_id].occupant.movement.dash:a.data.board.tiles[e.tile_id].occupant.movement.range,c=[],r={},l=function(t){1===t?(r[t]={},a.tiles[e.tile_id].adjacent.forEach((function(s){var i=!0;a.data.board.tiles[e.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[e.tile_id].occupant.movement.special.flying&&"lake"!==a.data.board.tiles[s].type&&"none"!==a.data.board.tiles[s].type&&(i=!1),a.data.board.tiles[e.tile_id].occupant.movement.special.aquatic||a.data.board.tiles[e.tile_id].occupant.movement.special.flying||"none"===a.data.board.tiles[s].type&&(i=!1),i&&!a.data.board.tiles[s].occupant.player&&(c.push(s),r[t][s]={prevTile:e.tile_id,currentTile:s})}))):(r[t]={},Object.values(r[t-1]).forEach((function(s){a.tiles[s.currentTile].adjacent.filter((function(t){return!a.tiles[s.prevTile].adjacent.includes(t)&&t!==s.prevTile})).forEach((function(i){var n=!0;a.tiles[i].adjacent.filter((function(t){return t!==s.currentTile})).forEach((function(t){a.tiles[t].adjacent.includes(s.prevTile)&&(n=!1)})),a.tiles[i].adjacentNonTile&&(a.tiles[i].adjacentNonTile.includes("D")?a.gods[a.tiles[i].adjacentNonTile].adjacent.includes(s.prevTile)&&(n=!1):a.data.board.wells[a.tiles[i].adjacentNonTile].adjacent.includes(s.prevTile)&&(n=!1)),a.data.board.tiles[e.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[e.tile_id].occupant.movement.special.flying&&"lake"!==a.data.board.tiles[i].type&&"none"!==a.data.board.tiles[i].type&&(n=!1),a.data.board.tiles[e.tile_id].occupant.movement.special.aquatic||a.data.board.tiles[e.tile_id].occupant.movement.special.flying||"none"===a.data.board.tiles[i].type&&(n=!1),!n||c.includes(i)||a.data.board.tiles[i].occupant.player||(c.push(i),r[t][i]={prevTile:s.currentTile,currentTile:i})}))})))},o=1;o<=n;o++)l(o);var d=[],u={};if(a.data.board.tiles[e.tile_id].occupant.ranged)for(var h=function(t){1===t?(u[t]={},a.tiles[e.tile_id].adjacent.forEach((function(s){a.data.board.tiles[s].occupant.player||(d.push(s),u[t][s]={prevTile:e.tile_id,currentTile:s})}))):(u[t]={},Object.values(u[t-1]).forEach((function(e){a.tiles[e.currentTile].adjacent.filter((function(t){return!a.tiles[e.prevTile].adjacent.includes(t)&&t!==e.prevTile})).forEach((function(s){var i=!0;a.tiles[s].adjacent.filter((function(t){return t!==e.currentTile})).forEach((function(t){a.tiles[t].adjacent.includes(e.prevTile)&&(i=!1)})),a.tiles[s].adjacentNonTile&&(a.tiles[s].adjacentNonTile.includes("D")?a.gods[a.tiles[s].adjacentNonTile].adjacent.includes(e.prevTile)&&(i=!1):a.data.board.wells[a.tiles[s].adjacentNonTile].adjacent.includes(e.prevTile)&&(i=!1)),!i||d.includes(s)||a.data.board.tiles[e.currentTile].occupant.player||(d.push(s),u[t][s]={prevTile:e.currentTile,currentTile:s})}))})))},p=1;p<=5;p++)h(p);a.tiles[e.tile_id].occupantSelected?(Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!1})),Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!1})),Object.keys(a.tiles).forEach((function(t){(function(t){if(a.data.board.tiles[t].occupant.player)return!1;if(a.data.board.tiles[e.tile_id].occupant.movement.dash>0&&!a.data.board.tiles[e.tile_id].occupant.hasDashed){if(!c.includes(t))return!1}else{if(a.data.board.tiles[e.tile_id].occupant.hasMoved)return!1;if(s)return!1;if(a.data.board.tiles[e.tile_id].occupant.movement.special.jump){if(!i.includes(t)&&!c.includes(t))return!1}else if(!c.includes(t))return!1}return!(!a.data.board.tiles[e.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[e.tile_id].occupant.movement.special.flying&&"none"===a.data.board.tiles[t].type)&&!(a.data.board.tiles[e.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[e.tile_id].occupant.movement.special.flying&&"lake"!==a.data.board.tiles[t].type&&"none"!==a.data.board.tiles[t].type)})(t)&&(a.tiles[t].selectable=!0),!function(t){if(a.data.board.tiles[e.tile_id].occupant.ranged){if(!d.includes(t)&&!a.tiles[e.tile_id].adjacent.includes(t))return!1}else if(!a.tiles[e.tile_id].adjacent.includes(t))return!1;return!(!a.data.board.tiles[t].occupant.player||a.data.board.tiles[t].occupant.player===e.player)&&!a.data.board.tiles[e.tile_id].occupant.hasAttacked}(t)?e.tile_id!==t&&(a.tiles[t].occupantSelectable=!1):a.tiles[t].occupantSelectable=!0})),a.currentAction="occupant_selected"):(1!==a.data[e.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].occupantSelectable=!0})),a.data.board.tiles[e.tile_id].occupant.hasDashed=!0,a.data.board.tiles[e.tile_id].occupant.movement.haste&&Object.keys(a.data.board.wells).forEach((function(t){a.data.board.wells[t].adjacent.includes(e.tile_id)&&a.data.board.wells[t].available&&(a.data.board.wells[t].available=!1,a.data.board.wells[t].collected=!0,a.data[e.player].faeria+=1)})),a.currentAction="");var f="player1"===e.player?"D0":"D6",b="player1"===e.player?["B1","F1","D2","D3","D4","D5"]:["B5","F5","D1","D2","D3","D4"];if(a.tiles[e.tile_id].occupantSelected){if(!a.data.board.tiles[e.tile_id].occupant.hasAttacked)if(a.data.board.tiles[e.tile_id].occupant.ranged&&!a.gods[f].adjacent.includes(e.tile_id)){var y=d.filter((function(t){return a.gods[f].adjacent.includes(t)}));1===y.length&&!a.data.board.tiles[y[0]].occupant.player&&b.includes(e.tile_id)&&(a.gods[f].selectable=!0)}else a.gods[f].adjacent.includes(e.tile_id)&&(a.gods[f].selectable=!0)}else a.gods[f].selectable=!1;return a},MOVE_OCCUPANT:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=Object.keys(a.tiles).filter((function(t){return a.tiles[t].occupantSelected}))[0];a.data.board.tiles[e.tile_id].occupant=a.data.board.tiles[s].occupant;a.data.board.tiles[s].occupant={player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1},1!==a.data[e.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].occupantSelectable=!0})),a.tiles[s].occupantSelected=!1,a.data.board.tiles[e.tile_id].occupant.movement.dash>0&&!a.data.board.tiles[e.tile_id].occupant.hasDashed?(a.data.board.tiles[e.tile_id].occupant.hasDashed=!0,a.data.board.tiles[e.tile_id].occupant.movement.haste&&Object.keys(a.data.board.wells).forEach((function(t){a.data.board.wells[t].adjacent.includes(e.tile_id)&&a.data.board.wells[t].available&&(a.data.board.wells[t].available=!1,a.data.board.wells[t].collected=!0,a.data[e.player].faeria+=1)}))):(a.data.board.tiles[e.tile_id].occupant.hasMoved=!0,a.data.board.tiles[e.tile_id].occupant.ranged&&(a.data.board.tiles[e.tile_id].occupant.hasAttacked=!0),Object.keys(a.data.board.wells).forEach((function(t){a.data.board.wells[t].adjacent.includes(e.tile_id)&&a.data.board.wells[t].available&&(a.data.board.wells[t].available=!1,a.data.board.wells[t].collected=!0,a.data[e.player].faeria+=1)}))),Object.keys(a.gods).forEach((function(t){a.gods[t].selectable=!1})),a.currentAction="";var i=new FormData;return i.append("react_state",JSON.stringify(a)),i.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",i).catch((function(t){console.log("Network Error",t.message)})),a},ATTACK_OCCUPANT:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=Object.keys(a.tiles).filter((function(t){return a.tiles[t].occupantSelected}))[0],i=a.data.board.tiles[s].occupant,n=a.data.board.tiles[e.tile_id].occupant,c={player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};a.tiles[e.tile_id].adjacent.includes(s)&&(i.health-=n.attack),n.protection?n.protection=!1:n.health-=i.attack,i.hasAttacked=!0,i.hasMoved=!0,i.hasDashed=!0,a.data.board.tiles[s].occupant=i.health>0?i:c,a.data.board.tiles[e.tile_id].occupant=n.health>0?n:c;var r=new R(a,e);i.health<=0&&i.effects.lastword&&r.processLastwordEffect(i,s),n.health<=0&&n.effects.lastword&&r.processLastwordEffect(n,e.tile_id),1!==a.data[e.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].occupantSelectable=!0})),a.tiles[s].occupantSelected=!1,a.currentAction="";var l=new FormData;return l.append("react_state",JSON.stringify(a)),l.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",l).catch((function(t){console.log("Network Error",t.message)})),a},ATTACK_GOD:function(t,e){var a=JSON.parse(JSON.stringify(t)),s=Object.keys(a.tiles).filter((function(t){return a.tiles[t].occupantSelected}))[0],i=a.data.board.tiles[s].occupant;a.data.board.gods[e.god].health-=i.attack,a.data.board.gods[e.god].wasHit=!0,i.hasAttacked=!0,i.hasMoved=!0,a.gods[e.god].selectable=!1,1!==a.data[e.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].occupantSelectable=!0})),a.tiles[s].occupantSelected=!1,a.currentAction="",a.data.board.gods[e.god].health<=0&&(a.data.status.finished=!0,a.data.status.winner=e.player);var n=new FormData;return n.append("react_state",JSON.stringify(a)),n.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",n).catch((function(t){console.log("Network Error",t.message)})),a},END_TURN:function(t,e){var a=JSON.parse(JSON.stringify(t));a.data[e.opponent].wheel_used=!1;var s={player1:"D6",player2:"D0"};a.data.status.turn>1&&(a.data[e.opponent].faeria+=3,a.data[e.opponent].deck.length>0?a.data[e.opponent].hand.length<9?a.data[e.opponent].hand.push(a.data[e.opponent].deck.splice(0,1)[0]):a.data[e.opponent].deck.splice(0,1):(a.data.board.gods[s[e.opponent]].health-=++a.data[e.opponent].health_dmg,a.data.board.gods[s[e.opponent]].health<=0&&(a.data.status.finished=!0,a.data.status.winner=e.player)));var i={player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1,production:!1},effectUsed:!1};Object.keys(a.data.board.tiles).forEach((function(t){if(a.data.board.tiles[t].occupant.movement.special.aquatic&&!a.data.board.tiles[t].occupant.movement.special.flying&&a.data.board.tiles[t].occupant.player===e.player&&"lake"!==a.data.board.tiles[t].type&&"none"!==a.data.board.tiles[t].type||!a.data.board.tiles[t].occupant.movement.special.aquatic&&!a.data.board.tiles[t].occupant.movement.special.flying&&a.data.board.tiles[t].occupant.player===e.player&&"none"===a.data.board.tiles[t].type){var s=a.data.board.tiles[t].occupant;a.data.board.tiles[t].occupant=i;var n=new R(a,e);s.health<=0&&s.effects.lastword&&n.processLastwordEffect(s,t)}else a.data.board.tiles[t].occupant.hasMoved=!1,a.data.board.tiles[t].occupant.hasAttacked=!1;28===a.data.board.tiles[t].occupant.id&&a.data.status.current===a.data.board.tiles[t].occupant.player&&a.tiles[t].adjacent.forEach((function(t){if(a.data.board.tiles[t].occupant.player===e.opponent){var s=a.data.board.tiles[t].occupant;s.protection?s.protection=!1:s.health-=1,a.data.board.tiles[t].occupant=s.health>0?s:i;var n=new R(a,e);s.health<=0&&s.effects.lastword&&n.processLastwordEffect(s,t)}}))}));var n=function(t){return a.data.board.tiles[t].occupant.player===e.opponent};Object.keys(a.data.board.wells).forEach((function(t){a.data.board.wells[t].adjacent.some(n)?(a.data.board.wells[t].available=!1,a.data.board.wells[t].collected=!0,a.data[e.opponent].faeria+=1):(a.data.board.wells[t].available=!0,a.data.board.wells[t].collected=!1)})),Object.keys(a.data.board.tiles).forEach((function(t){a.data.board.tiles[t].occupant.effects.production&&a.data.board.tiles[t].occupant.player===e.opponent&&new R(a,e).processProductionEffect(a.data.board.tiles[t].occupant,t)})),a.data.status.turn+=1,a.data.status.current=e.opponent,Object.keys(a.wheelbuttons).forEach((function(t){a.wheelbuttons[t].selectable=!0,a.wheelbuttons[t].selected=!1})),Object.keys(a.hand).forEach((function(t){a.hand[t].selectable=!0,a.hand[t].selected=!1})),Object.keys(a.tiles).forEach((function(t){a.tiles[t].selectable=!1,a.tiles[t].selected=!1,a.tiles[t].occupantSelectable=!0,a.tiles[t].occupantSelected=!1})),Object.keys(a.gods).forEach((function(t){a.gods[t].selectable=!1})),a.currentAction="";var c=new FormData;return c.append("react_state",JSON.stringify(a)),c.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",c).catch((function(t){console.log("Network Error",t.message)})),a}},(a=t)&&(h=Object(u.a)(Object(u.a)({},h),a)),f=Object(u.a)(Object(u.a)({},f),e)},P={},G=new FormData;G.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php",G).then((function(t){P=JSON.parse(t.data),U(P),r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(J,{})}),document.getElementById("game"))})).catch((function(t){console.log("Network Error",t.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.9f06484b.chunk.js.map
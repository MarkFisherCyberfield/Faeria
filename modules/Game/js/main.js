(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),i=a.n(n),c=a(18),r=a.n(c),l=(a(27),a(3)),d=a(8),o=a(19),u=a(5),h={},p=[],f={},b=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(n.useState)(h)[1],a=function(e,t){var a=f[e](h,t);h=Object(u.a)(Object(u.a)({},h),a);var s,n=Object(o.a)(p);try{for(n.s();!(s=n.n()).done;){(0,s.value)(h)}}catch(i){n.e(i)}finally{n.f()}};return Object(n.useEffect)((function(){return e&&p.push(t),function(){e&&(p=p.filter((function(e){return e!==t})))}}),[t,e]),[h,a]},y=(a(28),{cardback:"assets/images/cards/cardback.jpg",0:"assets/images/cards/cheeksplore.jpg",1:"assets/images/cards/mercheek.jpg",2:"assets/images/cards/dolphin_cheekrider.jpg",3:"assets/images/cards/clamcheek.jpg",4:"assets/images/cards/ninjacheek.jpg",5:"assets/images/cards/song_of_the_mercheek.jpg",6:"assets/images/cards/cheek_in_a_bottle.jpg",7:"assets/images/cards/cheekie_in_a_lamp.jpg",8:"assets/images/cards/cheeklord.jpg",9:"assets/images/cards/rain_of_cheek.jpg",10:"assets/images/cards/cheekdrop.jpg",11:"assets/images/cards/cheekmoon.jpg",12:"assets/images/cards/cheekpearl.jpg",13:"assets/images/cards/crabcheek.jpg",14:"assets/images/cards/cheekcano.jpg",15:"assets/images/cards/cheekdevil.jpg",16:"assets/images/cards/cheekflame.jpg",17:"assets/images/cards/cheekblast.jpg",18:"assets/images/cards/cheekflame_faerie.jpg",19:"assets/images/cards/baby_cheekdevil.jpg",20:"assets/images/cards/ghostcheek_tower.jpg",21:"assets/images/cards/ghostcheek.jpg",22:"assets/images/cards/ghostcheek_alchemist.jpg",23:"assets/images/cards/cheekruption.jpg",24:"assets/images/cards/suncheek.jpg",25:"assets/images/cards/cheekflower.jpg",26:"assets/images/cards/cavecheek_dweller.jpg",27:"assets/images/cards/mushroom_cheek.jpg",28:"assets/images/cards/cheekshrooms.jpg",29:"assets/images/cards/cheektree_giant.jpg",30:"assets/images/cards/cheekworld_tree.jpg",31:"assets/images/cards/cheek_shaman.jpg",32:"assets/images/cards/cheekfox.jpg",33:"assets/images/cards/cheekbloom_spirit.jpg",34:"assets/images/cards/cheekshield_spirit.jpg",35:"assets/images/cards/cheek_dancers.jpg"}),g={aquatic_enemy:"assets/images/ui/aquatic_enemy.png",aquatic_enemyhover:"assets/images/ui/aquatic_enemyhover.png",aquatic_friendly:"assets/images/ui/aquatic_friendly.png",aquatic_friendlyhover:"assets/images/ui/aquatic_friendlyhover.png",flying_enemy:"assets/images/ui/flying_enemy.png",flying_enemyhover:"assets/images/ui/flying_enemyhover.png",flying_friendly:"assets/images/ui/flying_friendly.png",flying_friendlyhover:"assets/images/ui/flying_friendlyhover.png",jump_enemy:"assets/images/ui/jump_enemy.png",jump_enemyhover:"assets/images/ui/jump_enemyhover.png",jump_friendly:"assets/images/ui/jump_friendly.png",jump_friendlyhover:"assets/images/ui/jump_friendlyhover.png",ranged_enemy:"assets/images/ui/ranged_enemy.png",ranged_enemyhover:"assets/images/ui/ranged_enemyhover.png",ranged_friendly:"assets/images/ui/ranged_friendly.png",ranged_friendlyhover:"assets/images/ui/ranged_friendlyhover.png",scoot_enemy:"assets/images/ui/scoot_enemy.png",scoot_enemyhover:"assets/images/ui/scoot_enemyhover.png",scoot_friendly:"assets/images/ui/scoot_friendly.png",scoot_friendlyhover:"assets/images/ui/scoot_friendlyhover.png",taunt_enemy:"assets/images/ui/taunt_enemy.png",taunt_enemyhover:"assets/images/ui/taunt_enemyhover.png",taunt_friendly:"assets/images/ui/taunt_friendly.png",taunt_friendlyhover:"assets/images/ui/taunt_friendlyhover.png"},j=function(e){var t=b(),a=Object(l.a)(t,2),n=a[0],i=a[1],c=[[e.x+30,e.y-10].join(),[e.x-10,e.y+60].join(),[e.x+70,e.y+60].join()].join(" "),r=n.data.board.tiles[e.tile].occupant.player===e.user?n.tiles[e.tile].occupantSelectable&&n.data.status.current===e.user?"friendly-selectable":"friendly":n.tiles[e.tile].occupantSelectable?"enemy-selectable":"enemy",d=n.data.board.tiles[e.tile].occupant.player===e.user?n.tiles[e.tile].occupantSelected?"creature-selected":"creature":"creature-enemy",o=n.data.board.tiles[e.tile].occupant.player===e.user?"friendly":"enemy",u=n.data.board.tiles[e.tile].occupant.taunt?Object(s.jsx)("rect",{x:e.x+20,y:e.y-7,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_taunt"+e.tile+")"}):null,h=n.data.board.tiles[e.tile].occupant.ranged?Object(s.jsx)("rect",{x:e.x+50,y:e.y+30,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_ranged"+e.tile+")"}):null,p=n.data.board.tiles[e.tile].occupant.movement.special.flying?Object(s.jsx)("rect",{x:e.x+20,y:e.y+45,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_flying"+e.tile+")"}):null,f=!p&&n.data.board.tiles[e.tile].occupant.movement.special.aquatic?Object(s.jsx)("rect",{x:e.x+20,y:e.y+45,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_aquatic"+e.tile+")"}):null,j=n.data.board.tiles[e.tile].occupant.movement.special.jump?Object(s.jsx)("rect",{x:e.x+20,y:e.y+65,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_jump"+e.tile+")"}):null,m=!j&&n.data.board.tiles[e.tile].occupant.movement.range>1?Object(s.jsx)("rect",{x:e.x+20,y:e.y+65,rx:"5",ry:"5",width:"20",height:"20",fill:"url(#icon_scoot"+e.tile+")"}):null,_=n.data.board.tiles[e.tile].occupant.divine?Object(s.jsx)("polygon",{points:c,className:"divine"}):null,v=n.data.board.tiles[e.tile].occupant.protection?Object(s.jsx)("ellipse",{cx:e.x+30,cy:e.y+39,rx:"49",ry:"49",className:"protection"}):null,O=Object(s.jsxs)("g",{className:r,onClick:function(){if(n.tiles[e.tile].occupantSelectable&&n.data.status.current===e.user){var t={player:e.user,opponent:e.opponent,tile_id:e.tile};"gift_occupant"===n.currentAction?i("PROCESS_GIFT_OCCUPANT",t):"event_occupant"===n.currentAction?i("PROCESS_EVENT_OCCUPANT",t):n.data.board.tiles[e.tile].occupant.player===e.user?i("SELECT_OCCUPANT",t):"occupant_selected"===n.currentAction&&i("ATTACK_OCCUPANT",t)}},children:[Object(s.jsxs)("defs",{children:[Object(s.jsx)("pattern",{id:"creature-image"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:y[n.data.board.tiles[e.tile].occupant.id]})}),Object(s.jsx)("pattern",{id:"icon_aquatic"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["aquatic_"+o]})}),Object(s.jsx)("pattern",{id:"icon_flying"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["flying_"+o]})}),Object(s.jsx)("pattern",{id:"icon_jump"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["jump_"+o]})}),Object(s.jsx)("pattern",{id:"icon_ranged"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["ranged_"+o]})}),Object(s.jsx)("pattern",{id:"icon_scoot"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["scoot_"+o]})}),Object(s.jsx)("pattern",{id:"icon_taunt"+e.tile,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:g["taunt_"+o]})})]}),Object(s.jsx)("rect",{x:e.x,y:e.y,rx:"5",ry:"5",width:e.width,height:e.width/3*4,className:d,fill:"url(#creature-image"+e.tile+")"}),u,h,p,f,j,m,Object(s.jsx)("rect",{x:e.x,y:e.y+55,rx:"5",ry:"5",width:"20",height:"25",className:"attack"}),Object(s.jsx)("text",{x:e.x+10,y:e.y+70,dy:".3em",className:"attack-text",children:n.data.board.tiles[e.tile].occupant.attack}),Object(s.jsx)("rect",{x:e.x+40,y:e.y+55,rx:"5",ry:"5",width:"20",height:"25",className:"health"}),Object(s.jsx)("text",{x:e.x+50,y:e.y+70,dy:".3em",className:"health-text",children:n.data.board.tiles[e.tile].occupant.health}),_,v]});return n.data.board.tiles[e.tile].occupant.id>0?O:null},m=(a(29),function(e){var t=b(),a=Object(l.a)(t,2),n=a[0],c=a[1],r=n.tiles[e.id].selectable&&n.data.status.current===e.user?"tile-selectable":"tile-not-selectable",d=n.data.board.tiles[e.id].owner!==e.user?e.type+"-opponent":e.type,o=e.hexSize,u=e.startPosX,h=e.startPosY,p=[[u+.5*o,h].join(),[u+1.5*o,h].join(),[u+2*o,h+Math.sqrt(3)*o*.5].join(),[u+1.5*o,h+Math.sqrt(3)*o].join(),[u+.5*o,h+Math.sqrt(3)*o].join(),[u,h+Math.sqrt(3)*o*.5].join()].join(" ");return Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsx)("polygon",{className:d+" "+r,points:p,onClick:function(){if(n.tiles[e.id].selectable&&n.data.status.current===e.user){var t={player:e.user,opponent:e.opponent,tile_id:e.id};"summon_creature"===n.currentAction?c("SUMMON_CREATURE",t):"occupant_selected"===n.currentAction?c("MOVE_OCCUPANT",t):"event_tile"===n.currentAction?c("PROCESS_EVENT_TILE",t):c("BUILD_TILE",t)}}}),Object(s.jsx)(j,{tile:e.id,x:u+.5*o,y:h+Math.sqrt(3)*o*.125,width:o,user:e.user,opponent:e.opponent})]})}),_=(a(30),function(e){var t=e.data.collected?"well-collected":"well-available";return Object(s.jsx)("circle",{cx:e.cx,cy:e.cy,r:e.r,className:t})}),v=(a(31),function(e){var t=b(),a=Object(l.a)(t,2),n=a[0],i=a[1],c=n.gods[e.id].selectable?"god-selectable":"god-not-selectable";return Object(s.jsxs)("g",{className:c,onClick:function(){if(n.gods[e.id].selectable){var t={god:e.id,player:e.user};i("ATTACK_GOD",t)}},children:[Object(s.jsx)("circle",{cx:e.cx,cy:e.cy,r:e.r}),Object(s.jsx)("text",{x:e.cx,y:e.cy,textAnchor:"middle",stroke:"#8B0000",strokeWidth:"4px",fontSize:"40px",dy:".3em",children:e.data.health})]})}),O=function(e){var t=60,a="player2"===e.user?{G:2,F:5,E:6,D:5,C:6,B:5,A:2}:{A:2,B:5,C:6,D:5,E:6,F:5,G:2},n="player2"===e.user?{G:[3,0],A:[3,0]}:{A:[0,3],G:[0,3]},i="player2"===e.user?{D:[6,0]}:{D:[0,6]},c=Object.keys(a).map((function(n,i){return Object(d.a)(Array(a[n])).map((function(c,r){var l=i%2===0,d="player2"===e.user?a[n]-r:r+1;return Object(s.jsx)(m,{id:n+d,type:e.data.tiles[n+d].type,hexSize:t,startPosX:t*i*1.5,startPosY:l?Math.sqrt(3)*t*(.5*(6-a[n])+r)+Math.sqrt(3)*t*.5:Math.sqrt(3)*t*r+Math.sqrt(3)*t,user:e.user,opponent:e.opponent},n+d)}))})),r=Object.keys(n).map((function(i){return n[i].map((function(c,r){var l=Object.keys(a).indexOf(i)%2===0;return Object(s.jsx)(_,{id:"well-"+i+n[i][r],data:e.data.wells[i+n[i][r]],r:30,cx:90*Object.keys(a).indexOf(i)+t,cy:l?(6-a[i]-n[i].length+[0,3][r])*Math.sqrt(3)*t:(6-a[i]-n[i].length+[0,3][r])*Math.sqrt(3)*t+Math.sqrt(3)*t*.5},"well-"+i+n[i][r])}))})),l=Object.keys(i).map((function(n){return i[n].map((function(c,r){var l=Object.keys(a).indexOf(n)%2===0;return Object(s.jsx)(v,{id:n+i[n][r],data:e.data.gods[n+i[n][r]],r:39,cx:90*Object.keys(a).indexOf(n)+t,cy:l?(7-a[n]-i[n].length+[0,6][r])*Math.sqrt(3)*t:(7-a[n]-i[n].length+[0,6][r])*Math.sqrt(3)*t+Math.sqrt(3)*t*.5,user:e.user},"god-"+n+i[n][r])}))}));return Object(s.jsx)("div",{style:{width:"60vw",justifyContent:"center",display:"flex"},children:Object(s.jsxs)("svg",{width:90*Object.keys(a).length+30,height:Math.sqrt(3)*t*7,children:[c,r,l]})})},k=(a(32),function(e){var t=b(),a=Object(l.a)(t,2),n=a[0],i=a[1],c=n.data[e.user].mulligan?e.clickAction:n.data.status.current!==e.user||e.owner!==e.user?function(){}:function(){if(n.hand[e.index].selectable&&n.data[e.user].cards[e.id].faeria_cost<=n.data[e.user].faeria){var t={player:e.user,opponent:e.opponent,hand_id:e.index,card_id:e.id};"event"===n.data[e.user].cards[e.id].type?i("SELECT_EVENT",t):i("SELECT_CARD",t)}},r=e.owner===e.opponent?y.cardback:y[e.data.id];return Object(s.jsx)("div",{className:e.classname,onClick:c,children:Object(s.jsx)("img",{id:e.index,alt:"",src:r,width:e.width,height:parseInt(e.height)-6+"px"})})}),w=function(e){var t=b()[0],a=e.data.hand.map((function(a,n){var i=t.hand[n+1].selected&&e.user===e.owner?"-selected":"";return Object(s.jsx)(k,{id:a,index:n+1,data:e.data.cards[a],height:e.height,width:"120px",classname:"card"+i,user:e.user,opponent:e.opponent,owner:e.owner},a)}));return Object(s.jsx)("div",{style:{width:"60vw",height:e.height,justifyContent:"center",display:"flex",alignSelf:e.align},children:a})},x={"wheel-B3":"assets/images/ui/pluscard.png","wheel-C2":"assets/images/ui/pluscheekia.png"},E=function(e){var t=b(),a=Object(l.a)(t,2),n=a[0],i=a[1],c=n.wheelbuttons[e.id].selectable?"":" not-selectable",r=e.hexSize,d=e.startPosX,o=e.startPosY,u=[[d+.5*r,o].join(),[d+1.5*r,o].join(),[d+2*r,o+Math.sqrt(3)*r*.5].join(),[d+1.5*r,o+Math.sqrt(3)*r].join(),[d+.5*r,o+Math.sqrt(3)*r].join(),[d,o+Math.sqrt(3)*r*.5].join()].join(" ");return Object(s.jsxs)("g",{children:[Object(s.jsx)("defs",{children:Object(s.jsx)("pattern",{id:"buttonimage-"+e.id,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",children:Object(s.jsx)("image",{height:"1",width:"1",preserveAspectRatio:"none",href:x[e.id]})})}),Object(s.jsx)("polygon",{className:e.className+c,fill:"url(#buttonimage-"+e.id+")",id:e.id,points:u,onClick:function(){if(n.wheelbuttons[e.id].selectable)switch(e.id){case"wheel-B3":i("DRAW_CARD",e.user);break;case"wheel-C2":i("PLUS_FAERIA",e.user);break;default:i("SELECT_LAND",{player:e.user,wheelbutton_id:e.id})}}})]})},S=(a(33),function(e){var t=b()[1],a=0===e.data.turn?"MULLIGAN":e.opponent===e.data.current?"ENEMY TURN":"END TURN",n=e.opponent===e.data.current?"enemyturn-button":"endturn-button",i=e.opponent===e.data.current?"enemyturn-text":"endturn-text",c=0===e.data.turn||e.opponent===e.data.current?function(){}:function(){var a={player:e.user,opponent:e.opponent,id:e.id};t("END_TURN",a)};return Object(s.jsxs)("g",{onClick:c,children:[Object(s.jsx)("rect",{x:"50",y:"125",rx:"20",ry:"20",width:"200",height:"50",className:n}),Object(s.jsx)("text",{x:"150",y:"150",fontSize:"25",className:i,dy:".3em",children:a})]})}),N=(a(34),function(e){var t=b()[0],a=40,n={A:2,B:3,C:2},i=.5*(300-(60*Object.keys(n).length+20)),c=.5*(300-Math.sqrt(3)*a*3-Math.sqrt(3)*a),r=Object.keys(n).map((function(t,r){return Object(d.a)(Array(n[t])).map((function(l,d){var o=r%2!==0;return Object(s.jsx)(E,{id:"wheel-"+t+(d+1),className:"wheel-"+t+(d+1),hexSize:a,startPosX:a*r*1.5+i,startPosY:o?Math.sqrt(3)*a*(.5*(3-n[t])+d)+Math.sqrt(3)*a*.5+c:Math.sqrt(3)*a*d+Math.sqrt(3)*a+c,user:e.user},"wheel-"+t+(d+1))}))})),l=t.data[e.user].wheel_used?Object(s.jsx)(S,{data:e.data,user:e.user,opponent:e.opponent,id:e.id}):r,o=e.data.current===e.opponent?"#962d3e":"#00FA9A",u=e.data.current===e.opponent?"#262626":"#2F4F4F";return Object(s.jsx)("div",{style:{width:"300px",height:"300px",position:"absolute",bottom:"50px",left:"50px"},children:Object(s.jsxs)("svg",{width:"300px",height:"300",children:[Object(s.jsx)("circle",{cx:"150",cy:"150",r:"145",stroke:o,strokeWidth:"5",fill:u}),l]})})}),A=function(e){return Object(s.jsx)("svg",{children:Object(s.jsxs)("g",{children:[Object(s.jsx)("circle",{cx:"50%",cy:"50%",r:"50",stroke:"#001920",strokeWidth:"5",fill:"#00bae8"}),Object(s.jsx)("text",{x:"50%",y:"50%",stroke:"#001920",strokeWidth:"3px",textAnchor:"middle",fontSize:"50px",dy:".3em",children:e.faeria})]})})},T=function(e){return Object(s.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(s.jsxs)("div",{style:{border:"5px solid #001920"},children:["Deck: ",e.deckcounter]}),Object(s.jsxs)("div",{style:{border:"5px solid #001920"},children:["Hand: ",e.handcounter]})]})},C=function(e){var t=e.hexSize,a=e.startPosX,n=e.startPosY,i=[[a+.5*t,n].join(),[a+1.5*t,n].join(),[a+2*t,n+Math.sqrt(3)*t*.5].join(),[a+1.5*t,n+Math.sqrt(3)*t].join(),[a+.5*t,n+Math.sqrt(3)*t].join(),[a,n+Math.sqrt(3)*t*.5].join()].join(" ");return Object(s.jsx)("polygon",{className:e.className,points:i})};a(35);var D=function(e){var t=function(e,t){var a={f:0,l:0,m:0,d:0};return Object.values(e).forEach((function(e){e.owner===t&&"p"!==e.type.charAt(0)&&(a[e.type.charAt(0)]+=1)})),a}(e.tiles,e.player),a=e.align,n=20,c=Object.keys(t).map((function(e,a){return Object(s.jsxs)("g",{id:e,children:[Object(s.jsx)(C,{className:e,hexSize:n,startPosX:n*a*2.5+8,startPosY:n-n*Math.sqrt(3)*.5}),Object(s.jsx)("text",{x:n*a*2.5+n+8,y:n*Math.sqrt(3)*.5+(n-n*Math.sqrt(3)*.5),className:e+"-text",fontSize:n,dy:".3em",children:t[e]})]},e)})),r=Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)("svg",{height:40,width:"208px",display:"block",margin:"auto",children:c})}),l=Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)(A,{faeria:e.data.faeria})}),d=Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)("div",{style:{width:"50%",border:"5px solid #001920",textAlign:"center"},children:Object(s.jsx)("b",{children:e.data.name})})}),o="flex-end"===a?Object(s.jsxs)(i.a.Fragment,{children:[r,l,d,Object(s.jsx)(T,{deckcounter:e.data.deck.length,handcounter:e.data.hand.length})]}):Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsx)(T,{deckcounter:e.data.deck.length,handcounter:e.data.hand.length}),d,l,r]});return Object(s.jsx)("div",{style:{alignSelf:a,margin:"25px"},children:o})},F=(a(36),a(2)),M=a.n(F),J=function(e){var t=b(),a=Object(l.a)(t,2),i=a[0],c=a[1],r=Object(n.useState)({0:!1,1:!1,2:!1}),d=Object(l.a)(r,2),o=d[0],u=d[1],h=Object(n.useState)(!1),p=Object(l.a)(h,2),f=p[0],y=p[1],g=function(e){var t=JSON.parse(JSON.stringify(o));t[e.target.id]=!t[e.target.id],u(t)},j=function(e){return o[e]?"card-mulligan-selected":"card-mulligan"},m=i.data[e.user].deck.slice(0,3).map((function(t,a){return Object(s.jsx)(k,{id:t,index:a,data:i.data[e.user].cards[t],height:"486px",width:"360px",clickAction:g,classname:j(a),user:e.user,opponent:e.opponent,owner:e.user},t)}));return Object(s.jsxs)("div",{className:"modal",children:[Object(s.jsx)("div",{style:{justifyContent:"center",display:"flex",height:"75%"},children:m}),Object(s.jsx)("div",{style:{justifyContent:"center",display:"flex"},children:Object(s.jsx)("div",{className:"modal-confirm",onClick:function(){if(!f){y(!0);var t=JSON.parse(JSON.stringify(i)),a=new FormData;a.append("id",e.id),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php",a).then((function(a){var s=JSON.parse(a.data);t.data[e.opponent]=s.data[e.opponent];for(var n=t.data[e.user].deck.slice(0,3),i=[],r=[],l=0;l<n.length;l++)o[l]?i.push(t.data[e.user].cards[n[l]].id):r.push(parseInt(n[l]));for(var d=Object.entries(t.data[e.user].cards).filter((function(e){return!i.includes(e[1].id)&&!r.includes(parseInt(e[0]))&&0!==parseInt(e[0])})),u=0;u<i.length;u++){var h=Math.floor(Math.random()*d.length);r.push(parseInt(d[h][0])),d.splice(h,1)}for(var p=[],f=t.data[e.user].deck.filter((function(e){return!r.includes(e)})),b=f.length,y=0;y<b;y++){var g=Math.floor(Math.random()*f.length);p.push(f[g]),f.splice(g,1)}"player2"===e.user&&r.push(0),t.data[e.user].deck=p,t.data[e.user].hand=r,t.data[e.user].mulligan=!1;var j=new FormData;j.append("react_state",JSON.stringify(t)),j.append("id",e.id),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",j).then((function(){c("CONFIRM_MULLIGAN",t)})).catch((function(e){console.log("Network Error",e.message)}))})).catch((function(e){console.log("Network Error",e.message)}))}},children:"CONFIRM"})})]})},q=function(){var e=b(),t=Object(l.a)(e,2),a=t[0],i=t[1],c=document.getElementById("user").value,r=document.getElementById("opponent").value,d=document.getElementById("game_id").value;Object(n.useEffect)((function(){var e={player:c,opponent:r,id:d};if(a.data[c].shuffle||i("SHUFFLE_DECK",e),a.data[c].mulligan||a.data[r].mulligan||0!==a.data.status.turn||"player1"!==c||i("START_GAME",e),a.data.status.current===r&&!a.data[c].mulligan||!a.data[c].mulligan&&a.data[r].mulligan){var t=setTimeout((function(){var e=new FormData;e.append("id",d);var t=Date.now();M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php?timestamp="+t,e).then((function(e){i("SET_DATA",JSON.parse(e.data))})).catch((function(e){console.log("Network Error",e.message)}))}),1e3);return function(){return clearTimeout(t)}}}));var o=a.data[c].mulligan?Object(s.jsx)(J,{user:c,opponent:r,id:d}):null;return a.data.status.finished?Object(s.jsxs)("h1",{style:{textAlign:"center"},children:["WINNER: ",a.data[a.data.status.winner].name]}):Object(s.jsxs)("div",{style:{display:"flex",height:"100vh"},children:[o,Object(s.jsxs)("div",{style:{width:"20vw",position:"relative",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(s.jsx)(D,{align:"flex-start",data:a.data[r],tiles:a.data.board.tiles,player:r}),Object(s.jsx)(D,{align:"flex-end",data:a.data[c],tiles:a.data.board.tiles,player:c})]}),Object(s.jsxs)("div",{style:{width:"60vw",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(s.jsx)(w,{data:a.data[r],owner:r,height:"36px",align:"flex-start",user:c,opponent:r}),Object(s.jsx)(O,{data:a.data.board,user:c,opponent:r}),Object(s.jsx)(w,{data:a.data[c],owner:c,height:"166px",align:"flex-end",user:c,opponent:r})]}),Object(s.jsx)("div",{style:{width:"20vw",position:"relative",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(s.jsx)(N,{data:a.data.status,user:c,opponent:r,id:d})})]})},B=function(){return Object(s.jsx)(q,{})},L=a(20),I=a(21),U=function(){function e(t,a){Object(L.a)(this,e),this.state=t,this.data=a,this.eventLibrary={0:"processEvent_0",5:"processEvent_5",6:"processEvent_6",7:"processEvent_7",9:"processEvent_9",11:"processEvent_11"},this.summonEffectLibrary={8:"processSummonEffect_8"},this.giftEffectLibrary={1:"processGiftEffect_1"},this.lastwordEffectLibrary={3:"processLastwordEffect_3"}}return Object(I.a)(e,[{key:"initEventLogic",value:function(){var e=this,t=this.state.hand;return t[this.data.hand_id].selected=!t[this.data.hand_id].selected,t[this.data.hand_id].selected?this[this.eventLibrary[this.state.data[this.data.player].cards[this.data.card_id].id]]("init"):this[this.eventLibrary[this.state.data[this.data.player].cards[this.data.card_id].id]]("revert"),Object.keys(t).forEach((function(a){parseInt(a)!==e.data.hand_id&&(t[a].selectable=!t[a].selectable)})),this.state.hand=t,1!==this.state.data[this.data.player].wheel_neutral_counter?Object.keys(this.state.wheelbuttons).forEach((function(a){t[e.data.hand_id].selected?e.state.wheelbuttons[a].selectable=!1:e.state.wheelbuttons[a].selectable=!0})):(t[this.data.hand_id].selected,this.state.wheelbuttons["wheel-B2"].selectable=!0),this.state}},{key:"handleEventLogic",value:function(){var e=this,t=this.getSelectedCard();this[this.eventLibrary[this.state.data[this.data.player].cards[this.state.data[this.data.player].hand[t-1]].id]]("handle");var a=this.state.hand;return a[t].selected=!a[t].selected,Object.keys(a).forEach((function(e){a[e].selectable=!0})),this.state.hand=a,1!==this.state.data[this.data.player].wheel_neutral_counter?Object.keys(this.state.wheelbuttons).forEach((function(t){e.state.wheelbuttons[t].selectable=!0})):this.state.wheelbuttons["wheel-B2"].selectable=!0,this.state.currentAction="",this.state.data[this.data.player].faeria-=this.state.data[this.data.player].cards[this.state.data[this.data.player].hand[t-1]].faeria_cost,this.state.data[this.data.player].hand.splice(t-1,1),this.state}},{key:"processSummonEffect",value:function(e){return this[this.summonEffectLibrary[e.id]](),this.state}},{key:"initGiftEffect",value:function(e){return this[this.giftEffectLibrary[e.id]]("init",e),this.state}},{key:"processGiftEffect",value:function(e){var t=this,a=this.state.data.board.tiles[e].occupant;return this[this.giftEffectLibrary[a.id]]("handle",e),this.state.tiles[e].occupantSelected=!1,this.state.currentAction="",Object.keys(this.state.hand).forEach((function(e){t.state.hand[e].selectable=!0})),1!==this.state.data[this.data.player].wheel_neutral_counter?Object.keys(this.state.wheelbuttons).forEach((function(e){t.state.wheelbuttons[e].selectable=!0})):this.state.wheelbuttons["wheel-B2"].selectable=!0,this.state}},{key:"processLastwordEffect",value:function(e,t){return this[this.lastwordEffectLibrary[e.id]](e,t),this.state}},{key:"setSelectStateForOccupants",value:function(e,t){var a=this,s=[];e&&s.push(this.data.player),t&&s.push(this.data.opponent),Object.keys(this.state.data.board.tiles).forEach((function(e){s.includes(a.state.data.board.tiles[e].occupant.player)&&!a.state.data.board.tiles[e].occupant.divine?a.state.tiles[e].occupantSelectable=!0:a.state.tiles[e].occupantSelectable=!1}))}},{key:"setSelectStateForConditionalOccupants",value:function(e,t,a){var s=this,n=[];e&&n.push(this.data.player),t&&n.push(this.data.opponent),Object.keys(this.state.data.board.tiles).forEach((function(e){n.includes(s.state.data.board.tiles[e].occupant.player)&&!s.state.data.board.tiles[e].occupant.divine&&s.state.data.board.tiles[e].occupant.attack<=a?s.state.tiles[e].occupantSelectable=!0:s.state.tiles[e].occupantSelectable=!1}))}},{key:"getSelectedCard",value:function(){var e=this;return parseInt(Object.keys(this.state.hand).filter((function(t){return e.state.hand[t].selected}))[0])}},{key:"getRemoveOccupant",value:function(){return{player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1}}},{key:"setSelectStateForBuildTiles",value:function(e){var t=this,a=this.state.tiles,s=function(e){return t.state.data.board.tiles[e].owner===t.data.player},n=function(e){return t.state.data.board.tiles[e].occupant.player===t.data.player&&"none"!==t.state.data.board.tiles[e].type},i=Object.keys(this.state.gods).filter((function(e){return t.state.gods[e].player===t.data.player}));Object.keys(a).forEach((function(c){var r=t.state.data.board.tiles[c].type,l=t.state.data.board.tiles[c].owner;("none"===r||"prairie"===r&&l===t.data.player)&&(a[c].adjacent.some(s)||a[c].adjacent.some(n)||t.state.gods[i].adjacent.includes(c))&&(t.state.data.board.tiles[c].occupant.movement.special.aquatic?"lake"===e&&(a[c].selectable=!0):a[c].selectable=!0)})),this.state.tiles=a}},{key:"setSelectStateForAllTiles",value:function(e){var t=this;Object.keys(this.state.tiles).forEach((function(a){t.state.tiles[a].selectable=e}))}},{key:"getGodTile",value:function(){return{player1:"D6",player2:"D0"}[this.data.player]}},{key:"getLandCostForType",value:function(e,t){return this.state.data[this.data.player].cards[e].land_cost[t]}},{key:"getLandCostForOccupant",value:function(e,t){return this.state.data.board.tiles[e].occupant.land_cost[t]}},{key:"handleCustomDrawLogic",value:function(e){-1!==e&&(this.state.data[this.data.player].hand.length<10?this.state.data[this.data.player].hand.push(this.state.data[this.data.player].deck.splice(e,1)[0]):this.state.data[this.data.player].deck.splice(e,1))}},{key:"getRandomTiles",value:function(){for(var e=Object.keys(this.state.data.board.tiles),t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),s=[e[a],e[t]];e[t]=s[0],e[a]=s[1]}return e}},{key:"getOccupantByID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case 10:return{player:this.data.player,id:10,type:"creature",faeria_cost:1,land_cost:{forest:0,desert:0,mountain:0,lake:1,wild:0},attack:1,base_attack:1,health:1,base_health:1,movement:{range:1,haste:!1,dash:0,special:{aquatic:!0,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!0,hasDashed:!1,hasAttacked:!0,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1};case 12:return{player:t.player,id:12,type:"creature",faeria_cost:2,land_cost:{forest:0,desert:0,mountain:0,lake:2,wild:0},attack:1,base_attack:1,health:1,base_health:1,movement:{range:1,haste:!1,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!0,divine:!0,protection:!0,ranged:!1,hasMoved:!0,hasDashed:!1,hasAttacked:!0,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1};case 13:return{player:this.data.player,id:13,type:"creature",faeria_cost:4,land_cost:{forest:0,desert:0,mountain:0,lake:2,wild:0},attack:6,base_attack:6,health:4,base_health:4,movement:{range:1,haste:!1,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:t.hasMoved,hasDashed:!1,hasAttacked:t.hasAttacked,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1};default:return{}}}},{key:"processEvent_0",value:function(e){"revert"===e&&(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForAllTiles(!1),this.state.currentAction=""),"init"===e&&(this.setSelectStateForOccupants(!1,!1),this.setSelectStateForBuildTiles("prairie"),this.state.currentAction="event_tile"),"handle"===e&&(this.setSelectStateForOccupants(!0,!1),this.setSelectStateForAllTiles(!1),this.state.data[this.data.player].faeria+=2,this.state.data.board.tiles[this.data.tile_id].type="prairie",this.state.data.board.tiles[this.data.tile_id].owner=this.data.player)}},{key:"processEvent_5",value:function(e){if("revert"===e&&(this.setSelectStateForOccupants(!0,!1),this.state.currentAction=""),"init"===e&&(this.setSelectStateForOccupants(!0,!0),this.state.currentAction="event_occupant"),"handle"===e){this.setSelectStateForOccupants(!0,!1);var t=this.state.data.board.tiles[this.data.tile_id].occupant;t.health=Math.floor(t.health/2),t.attack=Math.floor(t.attack/2)>=0?Math.floor(t.attack/2):0,this.state.data.board.tiles[this.data.tile_id].occupant=t.health>0?t:this.getRemoveOccupant(),t.health<=0&&t.effects.lastword&&this.processLastwordEffect(t,this.data.tile_id)}}},{key:"processEvent_6",value:function(e){var t=this;if("handle"===e)for(var a=0;a<3;a++)this.handleCustomDrawLogic(this.state.data[this.data.player].deck.findIndex((function(e){return t.getLandCostForType(e,"lake")>0})))}},{key:"processEvent_7",value:function(e){var t=this;if("handle"===e)for(var a=0;a<2;a++)this.handleCustomDrawLogic(this.state.data[this.data.player].deck.findIndex((function(e){return"event"===t.state.data[t.data.player].cards[e].type})))}},{key:"processEvent_9",value:function(e){var t=this;if("handle"===e)for(var a=!0,s=this.getRandomTiles().filter((function(e){return!t.state.data.board.tiles[e].occupant.player})),n=0;a;)0!==s.length?(this.state.data.board.tiles[s.splice(0,1)].occupant=this.getOccupantByID(10),6===++n&&(a=!1)):a=!1}},{key:"processEvent_11",value:function(e){var t=this;"handle"===e&&Object.keys(this.state.data.board.tiles).filter((function(e){return t.state.data.board.tiles[e].occupant.player===t.data.player&&t.getLandCostForOccupant(e,"lake")>0})).forEach((function(e){t.state.data.board.tiles[e].occupant=t.getOccupantByID(13,{hasAttacked:t.state.data.board.tiles[e].occupant.hasAttacked,hasMoved:t.state.data.board.tiles[e].occupant.hasMoved})}))}},{key:"processSummonEffect_8",value:function(){var e=this;this.state.tiles[this.data.tile_id].adjacent.some((function(t){return e.state.data.board.tiles[t].occupant.player===e.data.player&&e.state.data.board.tiles[t].occupant.land_cost.lake>0}))&&(this.state.data.board.tiles[this.data.tile_id].occupant.attack++,this.state.data.board.tiles[this.data.tile_id].occupant.health++)}},{key:"processLastwordEffect_3",value:function(e,t){this.state.data.board.tiles[t].occupant=this.getOccupantByID(12,{player:e.player})}},{key:"processGiftEffect_1",value:function(e,t){"init"===e&&(this.setSelectStateForConditionalOccupants(!1,!0,2),this.setSelectStateForAllTiles(!1),this.state.tiles[this.data.tile_id].occupantSelected=!0,this.state.tiles[this.data.tile_id].occupantSelectable=!0,this.state.currentAction="gift_occupant"),"handle"===e&&(this.data.tile_id!==t&&(this.state.data.board.tiles[this.data.tile_id].occupant.player=this.data.player,this.state.data.board.tiles[this.data.tile_id].occupant.hasMoved=!0,this.state.data.board.tiles[this.data.tile_id].occupant.hasAttacked=!0),this.setSelectStateForOccupants(!0,!1))}}]),e}(),R=function(e){var t,a;t={SET_DATA:function(e,t){JSON.parse(JSON.stringify(e));return t},SHUFFLE_DECK:function(e,t){for(var a=JSON.parse(JSON.stringify(e)),s=[],n=0;n<e.data[t.player].deck.length;n++){var i=Math.floor(Math.random()*a.data[t.player].deck.length);s.push(a.data[t.player].deck[i]),a.data[t.player].deck.splice(i,1)}a.data[t.player].deck=s,a.data[t.player].shuffle=!0;var c=JSON.parse(JSON.stringify(a)),r=new FormData;return r.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php",r).then((function(e){var a=JSON.parse(e.data);c.data[t.opponent]=a.data[t.opponent];var s=new FormData;s.append("react_state",JSON.stringify(c)),s.append("id",t.id),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(e){console.log("Network Error",e.message)}))})).catch((function(e){console.log("Network Error",e.message)})),a},CONFIRM_MULLIGAN:function(e,t){JSON.parse(JSON.stringify(e));return t},START_GAME:function(e,t){var a=JSON.parse(JSON.stringify(e));a.data.status.turn=1,a.data[t.player].wheel_used=!1,Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0,a.wheelbuttons[e].selected=!1})),Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0,a.hand[e].selected=!1})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].selected=!1,a.tiles[e].occupantSelectable=!0,a.tiles[e].occupantSelected=!1})),Object.keys(a.gods).forEach((function(e){a.gods[e].selectable=!1}));var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(e){console.log("Network Error",e.message)})),a},SELECT_LAND:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=a.wheelbuttons;s[t.wheelbutton_id].selected=!s[t.wheelbutton_id].selected,1!==a.data[t.player].wheel_neutral_counter&&Object.keys(s).forEach((function(e){e!==t.wheelbutton_id&&(s[e].selectable=!s[e].selectable)})),s[t.wheelbutton_id].selected?(Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!1})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].occupantSelectable=!1}))):(Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].occupantSelectable=!0}))),a.wheelbuttons=s;var n=a.tiles,i=function(e){return a.data.board.tiles[e].owner===t.player},c=function(e){return a.data.board.tiles[e].occupant.player===t.player&&"none"!==a.data.board.tiles[e].type},r=Object.keys(a.gods).filter((function(e){return a.gods[e].player===t.player}));return a.wheelbuttons[t.wheelbutton_id].selected?Object.keys(n).forEach((function(e){var s=a.data.board.tiles[e].type,l=a.data.board.tiles[e].owner;("none"===s||"prairie"===s&&l===t.player)&&(n[e].adjacent.some(i)||n[e].adjacent.some(c)||a.gods[r].adjacent.includes(e))&&(a.data.board.tiles[e].occupant.movement.special.aquatic?"lake"===a.wheelbuttons[t.wheelbutton_id].action&&(n[e].selectable=!0):n[e].selectable=!0)})):Object.keys(n).forEach((function(e){n[e].selectable=!1})),a.tiles=n,a},DRAW_CARD:function(e,t){var a=JSON.parse(JSON.stringify(e));a.data[t].deck.length>0?a.data[t].hand.length<9?a.data[t].hand.push(a.data[t].deck.splice(0,1)[0]):a.data[t].deck.splice(0,1):a.data.board.gods[{player1:"D6",player2:"D0"}[t]].health-=++a.data[t].health_dmg,a.data[t].wheel_used=!0;var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(e){console.log("Network Error",e.message)})),a},PLUS_FAERIA:function(e,t){var a=JSON.parse(JSON.stringify(e));a.data[t].faeria++,a.data[t].wheel_used=!0;var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(e){console.log("Network Error",e.message)})),a},BUILD_TILE:function(e,t){var a=JSON.parse(JSON.stringify(e)),s="none";Object.values(a.wheelbuttons).forEach((function(e){e.selected&&(s=e.action)})),a.data.board.tiles[t.tile_id].type=s,a.data.board.tiles[t.tile_id].owner=t.player;var n=Object.keys(a.wheelbuttons).filter((function(e){return a.wheelbuttons[e].selected}));a.wheelbuttons[n].selected=!1,Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].occupantSelectable=!0})),Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0})),"prairie"===s&&(a.data[t.player].wheel_neutral_counter+=1),1!==a.data[t.player].wheel_neutral_counter&&(Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0})),a.data[t.player].wheel_used=!0,a.data[t.player].wheel_neutral_counter=0);var i=new FormData;return i.append("react_state",JSON.stringify(a)),i.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",i).catch((function(e){console.log("Network Error",e.message)})),a},SELECT_CARD:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=a.hand;s[t.hand_id].selected=!s[t.hand_id].selected,Object.keys(s).forEach((function(e){parseInt(e)!==t.hand_id&&(s[e].selectable=!s[e].selectable)})),a.hand=s,1!==a.data[t.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(e){s[t.hand_id].selected?a.wheelbuttons[e].selectable=!1:a.wheelbuttons[e].selectable=!0})):(s[t.hand_id].selected,a.wheelbuttons["wheel-B2"].selectable=!0),Object.keys(a.tiles).forEach((function(e){s[t.hand_id].selected?a.tiles[e].occupantSelectable=!1:a.tiles[e].occupantSelectable=!0}));var n=function(){var e={forest:0,lake:0,mountain:0,desert:0};return Object.values(a.data.board.tiles).forEach((function(a){a.owner===t.player&&"prairie"!==a.type&&(e[a.type]+=1)})),e}(),i=Object.keys(a.data[t.player].cards[t.card_id].land_cost).filter((function(e){return a.data[t.player].cards[t.card_id].land_cost[e]>0&&"wild"!==e}));return s[t.hand_id].selected?(a.currentAction="summon_creature",Object.keys(a.tiles).forEach((function(e){(function(e){var s={8:"lake"};if(Object.keys(s).includes(String(a.data[t.player].cards[t.card_id].id))){if(!a.tiles[e].adjacent.some((function(e){return a.data.board.tiles[e].occupant.player===t.player&&a.data.board.tiles[e].occupant.land_cost[s[a.data[t.player].cards[t.card_id].id]]>0}))&&(!i.includes(a.data.board.tiles[e].type)||a.data.board.tiles[e].owner!==t.player))return!1;if(!a.data[t.player].cards[t.card_id].movement.special.aquatic&&!a.data[t.player].cards[t.card_id].movement.special.flying&&"none"===a.data.board.tiles[e].type)return!1;if(a.data[t.player].cards[t.card_id].movement.special.aquatic&&!a.data[t.player].cards[t.card_id].movement.special.flying&&"none"!==a.data.board.tiles[e].type&&"lake"!==a.data.board.tiles[e].type)return!1}else{if(a.data.board.tiles[e].owner!==t.player)return!1;if(!i.includes(a.data.board.tiles[e].type))return!1}if(a.data.board.tiles[e].occupant.player)return!1;var c=!0;return Object.keys(a.data[t.player].cards[t.card_id].land_cost).forEach((function(e){"wild"!==e?a.data[t.player].cards[t.card_id].land_cost[e]>n[e]&&(c=!1):a.data[t.player].cards[t.card_id].land_cost[e]>Object.values(n).reduce((function(e,t){return e+t}))&&(c=!1)})),c})(e)&&(a.tiles[e].selectable=!0)}))):(a.currentAction="",Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1}))),a},SELECT_EVENT:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=function(){var e={forest:0,lake:0,mountain:0,desert:0};return Object.values(a.data.board.tiles).forEach((function(a){a.owner===t.player&&"prairie"!==a.type&&(e[a.type]+=1)})),e}(),n=!0;if(Object.keys(a.data[t.player].cards[t.card_id].land_cost).forEach((function(e){"wild"!==e?a.data[t.player].cards[t.card_id].land_cost[e]>s[e]&&(n=!1):a.data[t.player].cards[t.card_id].land_cost[e]>Object.values(s).reduce((function(e,t){return e+t}))&&(n=!1)})),n){var i=new U(a,t);if(a.data[t.player].cards[t.card_id].effects.target)a=i.initEventLogic();else{a.hand[t.hand_id].selected=!a.hand[t.hand_id].selected,a=i.handleEventLogic();var c=new FormData;c.append("react_state",JSON.stringify(a)),c.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",c).catch((function(e){console.log("Network Error",e.message)}))}}return a},PROCESS_EVENT_OCCUPANT:function(e,t){var a=JSON.parse(JSON.stringify(e));a=new U(a,t).handleEventLogic();var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(e){console.log("Network Error",e.message)})),a},PROCESS_EVENT_TILE:function(e,t){var a=JSON.parse(JSON.stringify(e));a=new U(a,t).handleEventLogic();var s=new FormData;return s.append("react_state",JSON.stringify(a)),s.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",s).catch((function(e){console.log("Network Error",e.message)})),a},PROCESS_GIFT_OCCUPANT:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=Object.keys(a.tiles).filter((function(e){return a.tiles[e].occupantSelected}))[0],n=new U(a,t);a=n.processGiftEffect(s);var i=new FormData;return i.append("react_state",JSON.stringify(a)),i.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",i).catch((function(e){console.log("Network Error",e.message)})),a},SUMMON_CREATURE:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=a.data.board.tiles[t.tile_id].occupant;s.player=t.player;var n=parseInt(Object.keys(a.hand).filter((function(e){return a.hand[e].selected}))[0]),i=a.data[t.player].cards[a.data[t.player].hand[n-1]];s.id=i.id,s.type=i.type,s.faeria_cost=i.faeria_cost,s.land_cost=i.land_cost,s.attack=i.attack,s.base_attack=i.base_attack,s.health=i.health,s.base_health=i.base_health,s.movement=i.movement,s.taunt=i.taunt,s.divine=i.divine,s.protection=i.protection,s.ranged=i.ranged,s.hasDashed=!1,s.effects=i.effects,i.movement.haste?(s.hasMoved=!1,s.hasAttacked=!1,0===i.movement.dash&&Object.keys(a.data.board.wells).forEach((function(e){a.data.board.wells[e].adjacent.includes(t.tile_id)&&a.data.board.wells[e].available&&(a.data.board.wells[e].available=!1,a.data.board.wells[e].collected=!0,a.data[t.player].faeria+=1)}))):(s.hasMoved=!0,s.hasAttacked=!0),a.data.board.tiles[t.tile_id].occupant=s;var c=a.hand;(c[n].selected=!c[n].selected,s.effects.summon)&&new U(a,t).processSummonEffect(a.data.board.tiles[t.tile_id].occupant);if(s.effects.gift){var r=new U(a,t);c[n].selectable=!1,r.initGiftEffect(a.data.board.tiles[t.tile_id].occupant)}else Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].occupantSelectable=!0})),Object.keys(c).forEach((function(e){c[e].selectable=!0})),1!==a.data[t.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,a.currentAction="";a.hand=c,a.data[t.player].faeria-=a.data[t.player].cards[a.data[t.player].hand[n-1]].faeria_cost,a.data[t.player].hand.splice(n-1,1);var l=new FormData;return l.append("react_state",JSON.stringify(a)),l.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",l).catch((function(e){console.log("Network Error",e.message)})),a},SELECT_OCCUPANT:function(e,t){var a=JSON.parse(JSON.stringify(e));a.tiles[t.tile_id].occupantSelected=!a.tiles[t.tile_id].occupantSelected;var s=a.tiles[t.tile_id].adjacent.some((function(e){return a.data.board.tiles[e].occupant.taunt&&a.data.board.tiles[e].occupant.player===t.opponent})),n=[];a.data.board.tiles[t.tile_id].occupant.movement.special.jump&&a.tiles[t.tile_id].adjacent.forEach((function(e){n.includes(e)||e===t.tile_id||n.push(e),a.tiles[e].adjacent.forEach((function(e){n.includes(e)||e===t.tile_id||n.push(e)}))}));for(var i=a.data.board.tiles[t.tile_id].occupant.movement.dash>0&&!a.data.board.tiles[t.tile_id].occupant.hasDashed?a.data.board.tiles[t.tile_id].occupant.movement.dash:a.data.board.tiles[t.tile_id].occupant.movement.range,c=[],r={},l=function(e){1===e?(r[e]={},a.tiles[t.tile_id].adjacent.forEach((function(s){var n=!0;a.data.board.tiles[t.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[t.tile_id].occupant.movement.special.flying&&"lake"!==a.data.board.tiles[s].type&&"none"!==a.data.board.tiles[s].type&&(n=!1),a.data.board.tiles[t.tile_id].occupant.movement.special.aquatic||a.data.board.tiles[t.tile_id].occupant.movement.special.flying||"none"===a.data.board.tiles[s].type&&(n=!1),n&&!a.data.board.tiles[s].occupant.player&&(c.push(s),r[e][s]={prevTile:t.tile_id,currentTile:s})}))):(r[e]={},Object.values(r[e-1]).forEach((function(s){a.tiles[s.currentTile].adjacent.filter((function(e){return!a.tiles[s.prevTile].adjacent.includes(e)&&e!==s.prevTile})).forEach((function(n){var i=!0;a.tiles[n].adjacent.filter((function(e){return e!==s.currentTile})).forEach((function(e){a.tiles[e].adjacent.includes(s.prevTile)&&(i=!1)})),a.tiles[n].adjacentNonTile&&(a.tiles[n].adjacentNonTile.includes("D")?a.gods[a.tiles[n].adjacentNonTile].adjacent.includes(s.prevTile)&&(i=!1):a.data.board.wells[a.tiles[n].adjacentNonTile].adjacent.includes(s.prevTile)&&(i=!1)),a.data.board.tiles[t.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[t.tile_id].occupant.movement.special.flying&&"lake"!==a.data.board.tiles[n].type&&"none"!==a.data.board.tiles[n].type&&(i=!1),a.data.board.tiles[t.tile_id].occupant.movement.special.aquatic||a.data.board.tiles[t.tile_id].occupant.movement.special.flying||"none"===a.data.board.tiles[n].type&&(i=!1),!i||c.includes(n)||a.data.board.tiles[n].occupant.player||(c.push(n),r[e][n]={prevTile:s.currentTile,currentTile:n})}))})))},d=1;d<=i;d++)l(d);var o=[],u={};if(a.data.board.tiles[t.tile_id].occupant.ranged)for(var h=function(e){1===e?(u[e]={},a.tiles[t.tile_id].adjacent.forEach((function(s){a.data.board.tiles[s].occupant.player||(o.push(s),u[e][s]={prevTile:t.tile_id,currentTile:s})}))):(u[e]={},Object.values(u[e-1]).forEach((function(t){a.tiles[t.currentTile].adjacent.filter((function(e){return!a.tiles[t.prevTile].adjacent.includes(e)&&e!==t.prevTile})).forEach((function(s){var n=!0;a.tiles[s].adjacent.filter((function(e){return e!==t.currentTile})).forEach((function(e){a.tiles[e].adjacent.includes(t.prevTile)&&(n=!1)})),a.tiles[s].adjacentNonTile&&(a.tiles[s].adjacentNonTile.includes("D")?a.gods[a.tiles[s].adjacentNonTile].adjacent.includes(t.prevTile)&&(n=!1):a.data.board.wells[a.tiles[s].adjacentNonTile].adjacent.includes(t.prevTile)&&(n=!1)),!n||o.includes(s)||a.data.board.tiles[t.currentTile].occupant.player||(o.push(s),u[e][s]={prevTile:t.currentTile,currentTile:s})}))})))},p=1;p<=5;p++)h(p);a.tiles[t.tile_id].occupantSelected?(Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!1})),Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!1})),Object.keys(a.tiles).forEach((function(e){(function(e){if(a.data.board.tiles[e].occupant.player)return!1;if(a.data.board.tiles[t.tile_id].occupant.movement.dash>0&&!a.data.board.tiles[t.tile_id].occupant.hasDashed){if(!c.includes(e))return!1}else{if(a.data.board.tiles[t.tile_id].occupant.hasMoved)return!1;if(s)return!1;if(a.data.board.tiles[t.tile_id].occupant.movement.special.jump){if(!n.includes(e)&&!c.includes(e))return!1}else if(!c.includes(e))return!1}return!(!a.data.board.tiles[t.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[t.tile_id].occupant.movement.special.flying&&"none"===a.data.board.tiles[e].type)&&!(a.data.board.tiles[t.tile_id].occupant.movement.special.aquatic&&!a.data.board.tiles[t.tile_id].occupant.movement.special.flying&&"lake"!==a.data.board.tiles[e].type&&"none"!==a.data.board.tiles[e].type)})(e)&&(a.tiles[e].selectable=!0),!function(e){if(a.data.board.tiles[t.tile_id].occupant.ranged){if(!o.includes(e)&&!a.tiles[t.tile_id].adjacent.includes(e))return!1}else if(!a.tiles[t.tile_id].adjacent.includes(e))return!1;return!(!a.data.board.tiles[e].occupant.player||a.data.board.tiles[e].occupant.player===t.player)&&!a.data.board.tiles[t.tile_id].occupant.hasAttacked}(e)?t.tile_id!==e&&(a.tiles[e].occupantSelectable=!1):a.tiles[e].occupantSelectable=!0})),a.currentAction="occupant_selected"):(1!==a.data[t.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].occupantSelectable=!0})),a.data.board.tiles[t.tile_id].occupant.hasDashed=!0,a.data.board.tiles[t.tile_id].occupant.movement.haste&&Object.keys(a.data.board.wells).forEach((function(e){a.data.board.wells[e].adjacent.includes(t.tile_id)&&a.data.board.wells[e].available&&(a.data.board.wells[e].available=!1,a.data.board.wells[e].collected=!0,a.data[t.player].faeria+=1)})),a.currentAction="");var f="player1"===t.player?"D0":"D6",b="player1"===t.player?["B1","F1","D2","D3","D4","D5"]:["B5","F5","D1","D2","D3","D4"];if(a.tiles[t.tile_id].occupantSelected){if(!a.data.board.tiles[t.tile_id].occupant.hasAttacked)if(a.data.board.tiles[t.tile_id].occupant.ranged&&!a.gods[f].adjacent.includes(t.tile_id)){var y=o.filter((function(e){return a.gods[f].adjacent.includes(e)}));1===y.length&&!a.data.board.tiles[y[0]].occupant.player&&b.includes(t.tile_id)&&(a.gods[f].selectable=!0)}else a.gods[f].adjacent.includes(t.tile_id)&&(a.gods[f].selectable=!0)}else a.gods[f].selectable=!1;return a},MOVE_OCCUPANT:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=Object.keys(a.tiles).filter((function(e){return a.tiles[e].occupantSelected}))[0];a.data.board.tiles[t.tile_id].occupant=a.data.board.tiles[s].occupant;a.data.board.tiles[s].occupant={player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1},1!==a.data[t.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].occupantSelectable=!0})),a.tiles[s].occupantSelected=!1,a.data.board.tiles[t.tile_id].occupant.movement.dash>0&&!a.data.board.tiles[t.tile_id].occupant.hasDashed?(a.data.board.tiles[t.tile_id].occupant.hasDashed=!0,a.data.board.tiles[t.tile_id].occupant.movement.haste&&Object.keys(a.data.board.wells).forEach((function(e){a.data.board.wells[e].adjacent.includes(t.tile_id)&&a.data.board.wells[e].available&&(a.data.board.wells[e].available=!1,a.data.board.wells[e].collected=!0,a.data[t.player].faeria+=1)}))):(a.data.board.tiles[t.tile_id].occupant.hasMoved=!0,a.data.board.tiles[t.tile_id].occupant.ranged&&(a.data.board.tiles[t.tile_id].occupant.hasAttacked=!0),Object.keys(a.data.board.wells).forEach((function(e){a.data.board.wells[e].adjacent.includes(t.tile_id)&&a.data.board.wells[e].available&&(a.data.board.wells[e].available=!1,a.data.board.wells[e].collected=!0,a.data[t.player].faeria+=1)}))),Object.keys(a.gods).forEach((function(e){a.gods[e].selectable=!1})),a.currentAction="";var n=new FormData;return n.append("react_state",JSON.stringify(a)),n.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",n).catch((function(e){console.log("Network Error",e.message)})),a},ATTACK_OCCUPANT:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=Object.keys(a.tiles).filter((function(e){return a.tiles[e].occupantSelected}))[0],n=a.data.board.tiles[s].occupant,i=a.data.board.tiles[t.tile_id].occupant,c={player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1};a.tiles[t.tile_id].adjacent.includes(s)&&(n.health-=i.attack),i.protection?i.protection=!1:i.health-=n.attack,n.hasAttacked=!0,n.hasMoved=!0,n.hasDashed=!0,a.data.board.tiles[s].occupant=n.health>0?n:c,a.data.board.tiles[t.tile_id].occupant=i.health>0?i:c;var r=new U(a,t);n.health<=0&&n.effects.lastword&&r.processLastwordEffect(n,s),i.health<=0&&i.effects.lastword&&r.processLastwordEffect(i,t.tile_id),1!==a.data[t.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].occupantSelectable=!0})),a.tiles[s].occupantSelected=!1,a.currentAction="";var l=new FormData;return l.append("react_state",JSON.stringify(a)),l.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",l).catch((function(e){console.log("Network Error",e.message)})),a},ATTACK_GOD:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=Object.keys(a.tiles).filter((function(e){return a.tiles[e].occupantSelected}))[0],n=a.data.board.tiles[s].occupant;a.data.board.gods[t.god].health-=n.attack,a.data.board.gods[t.god].wasHit=!0,n.hasAttacked=!0,n.hasMoved=!0,a.gods[t.god].selectable=!1,1!==a.data[t.player].wheel_neutral_counter?Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0})):a.wheelbuttons["wheel-B2"].selectable=!0,Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].occupantSelectable=!0})),a.tiles[s].occupantSelected=!1,a.currentAction="",a.data.board.gods[t.god].health<=0&&(a.data.status.finished=!0,a.data.status.winner=t.player);var i=new FormData;return i.append("react_state",JSON.stringify(a)),i.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",i).catch((function(e){console.log("Network Error",e.message)})),a},END_TURN:function(e,t){var a=JSON.parse(JSON.stringify(e));a.data[t.opponent].wheel_used=!1,a.data[t.opponent].faeria+=3;a.data.status.turn>1&&(a.data[t.opponent].deck.length>0?a.data[t.opponent].hand.length<9?a.data[t.opponent].hand.push(a.data[t.opponent].deck.splice(0,1)[0]):a.data[t.opponent].deck.splice(0,1):a.data.board.gods[{player1:"D6",player2:"D0"}[t.opponent]].health-=++a.data[t.opponent].health_dmg);var s={player:"",id:0,type:"",faeria_cost:0,land_cost:{forest:0,desert:0,mountain:0,lake:0,wild:0},attack:0,base_attack:0,health:0,base_health:0,movement:{range:1,haste:!0,dash:0,special:{aquatic:!1,flying:!1,jump:!1}},taunt:!1,divine:!1,protection:!1,ranged:!1,hasMoved:!1,hasDashed:!1,hasAttacked:!1,effects:{summon:!1,gift:!1,lastword:!1},effectUsed:!1};Object.keys(a.data.board.tiles).forEach((function(e){a.data.board.tiles[e].occupant.movement.special.aquatic&&!a.data.board.tiles[e].occupant.movement.special.flying&&a.data.board.tiles[e].occupant.player===t.player&&"lake"!==a.data.board.tiles[e].type&&"none"!==a.data.board.tiles[e].type||!a.data.board.tiles[e].occupant.movement.special.aquatic&&!a.data.board.tiles[e].occupant.movement.special.flying&&a.data.board.tiles[e].occupant.player===t.player&&"none"===a.data.board.tiles[e].type?a.data.board.tiles[e].occupant=s:(a.data.board.tiles[e].occupant.hasMoved=!1,a.data.board.tiles[e].occupant.hasAttacked=!1)}));var n=function(e){return a.data.board.tiles[e].occupant.player===t.opponent};Object.keys(a.data.board.wells).forEach((function(e){a.data.board.wells[e].adjacent.some(n)?(a.data.board.wells[e].available=!1,a.data.board.wells[e].collected=!0,a.data[t.opponent].faeria+=1):(a.data.board.wells[e].available=!0,a.data.board.wells[e].collected=!1)})),a.data.status.turn+=1,a.data.status.current=t.opponent,Object.keys(a.wheelbuttons).forEach((function(e){a.wheelbuttons[e].selectable=!0,a.wheelbuttons[e].selected=!1})),Object.keys(a.hand).forEach((function(e){a.hand[e].selectable=!0,a.hand[e].selected=!1})),Object.keys(a.tiles).forEach((function(e){a.tiles[e].selectable=!1,a.tiles[e].selected=!1,a.tiles[e].occupantSelectable=!0,a.tiles[e].occupantSelected=!1})),Object.keys(a.gods).forEach((function(e){a.gods[e].selectable=!1})),a.currentAction="";var i=new FormData;return i.append("react_state",JSON.stringify(a)),i.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/saveState.php",i).catch((function(e){console.log("Network Error",e.message)})),a}},(a=e)&&(h=Object(u.a)(Object(u.a)({},h),a)),f=Object(u.a)(Object(u.a)({},f),t)},P={},G=new FormData;G.append("id",document.getElementById("game_id").value),M.a.post("https://cheekia.loca.lt/faeria/Faeria/utils/getState.php",G).then((function(e){P=JSON.parse(e.data),R(P),r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(B,{})}),document.getElementById("game"))})).catch((function(e){console.log("Network Error",e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.28889e3d.chunk.js.map